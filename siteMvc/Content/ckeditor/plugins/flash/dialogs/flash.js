/*
Copyright (c) 2003-2010, CKSource - Frederico Knabben. All rights reserved.
For licensing, see LICENSE.html or http://ckeditor.com/license
*/

(function(){(function(){var a=1,b=2,c=4,d={id:[{type:a,name:'id'}],classid:[{type:a,name:'classid'}],codebase:[{type:a,name:'codebase'}],pluginspage:[{type:c,name:'pluginspage'}],src:[{type:b,name:'movie'},{type:c,name:'src'},{type:a,name:'data'}],name:[{type:c,name:'name'}],align:[{type:a,name:'align'}],title:[{type:a,name:'title'},{type:c,name:'title'}],'class':[{type:a,name:'class'},{type:c,name:'class'}],width:[{type:a,name:'width'},{type:c,name:'width'}],height:[{type:a,name:'height'},{type:c,name:'height'}],hSpace:[{type:a,name:'hSpace'},{type:c,name:'hSpace'}],vSpace:[{type:a,name:'vSpace'},{type:c,name:'vSpace'}],style:[{type:a,name:'style'},{type:c,name:'style'}],type:[{type:c,name:'type'}]},e=['play','loop','menu','quality','scale','salign','wmode','bgcolor','base','flashvars','allowScriptAccess','allowFullScreen'];for(var f=0;f<e.length;f++)d[e[f]]=[{type:c,name:e[f]},{type:b,name:e[f]}];e=['allowFullScreen','play','loop','menu'];for(f=0;f<e.length;f++)d[e[f]][0]['default']=d[e[f]][1]['default']=true;var g=CKEDITOR.tools.cssLength;function h(k,l,m){var s=this;var n=d[s.id];if(!n)return;var o=s instanceof CKEDITOR.ui.dialog.checkbox;for(var p=0;p<n.length;p++){var q=n[p];switch(q.type){case a:if(!k)continue;if(k.getAttribute(q.name)!==null){var r=k.getAttribute(q.name);if(o)s.setValue(r.toLowerCase()=='true');else s.setValue(r);return;}else if(o)s.setValue(!!q['default']);break;case b:if(!k)continue;if(q.name in m){r=m[q.name];if(o)s.setValue(r.toLowerCase()=='true');else s.setValue(r);return;}else if(o)s.setValue(!!q['default']);break;case c:if(!l)continue;if(l.getAttribute(q.name)){r=l.getAttribute(q.name);if(o)s.setValue(r.toLowerCase()=='true');else s.setValue(r);return;}else if(o)s.setValue(!!q['default']);}}};function i(k,l,m){var u=this;var n=d[u.id];if(!n)return;var o=u.getValue()==='',p=u instanceof CKEDITOR.ui.dialog.checkbox;for(var q=0;q<n.length;q++){var r=n[q];switch(r.type){case a:if(!k||r.name=='data'&&l&&!k.hasAttribute('data'))continue;var s=u.getValue();if(o||p&&s===r['default'])k.removeAttribute(r.name);else k.setAttribute(r.name,s);break;case b:if(!k)continue;s=u.getValue();if(o||p&&s===r['default']){if(r.name in m)m[r.name].remove();}else if(r.name in m)m[r.name].setAttribute('value',s);else{var t=CKEDITOR.dom.element.createFromHtml('<cke:param></cke:param>',k.getDocument());t.setAttributes({name:r.name,value:s});if(k.getChildCount()<1)t.appendTo(k);else t.insertBefore(k.getFirst());}break;case c:if(!l)continue;s=u.getValue();
if(o||p&&s===r['default'])l.removeAttribute(r.name);else l.setAttribute(r.name,s);}}};function j(){var k=this.valueOf(),l=CKEDITOR.dialog.getCurrent(),m=jQuery(l.getParentEditor().element.$),n=k===true?m.data('flashWindow-content'):m.data('flashWindow-site');if(!n){var o=new Quantumart.QP8.BackendEventArgs();o.set_entityId(k===true?$q.toInt(m.data('content_id'),0):$q.toInt(m.data('library_entity_id'),0));o.set_parentEntityId($q.toInt(m.data('library_parent_entity_id'),0));o.set_entityTypeCode(k===true?ENTITY_TYPE_CODE_CONTENT:ENTITY_TYPE_CODE_SITE);o.set_actionCode(k===true?ACTION_CODE_POPUP_CONTENT_LIBRARY:ACTION_CODE_POPUP_SITE_LIBRARY);var p=parseInt(jQuery(CKEDITOR.dialog.getCurrent().getElement().$).find('.cke_dialog').css('zIndex'),10),q={additionalUrlParameters:{filterFileTypeId:Quantumart.QP8.Enums.LibraryFileType.Flash,subFolder:''},zIndex:p+10,libraryUrl:m.data('library_url')};n=new Quantumart.QP8.LibraryPopupWindow(o,q);k===true?m.data('flashWindow-content',n):m.data('flashWindow-site',n);}n.setContentId(0);if(k===true)n.setContentId(m.data('content_id'));n.setSelectCallback(function(r){l.setValueOf('info','src',r);});n.openWindow();o=null;q=null;m=null;};CKEDITOR.dialog.add('flash',function(k){var l=!k.config.flashEmbedTagOnly,m=k.config.flashAddEmbedTag||k.config.flashEmbedTagOnly,n,o='<div>'+CKEDITOR.tools.htmlEncode(k.lang.common.preview)+'<br>'+'<div id="cke_FlashPreviewLoader'+CKEDITOR.tools.getNextNumber()+'" style="display:none"><div class="loading">&nbsp;</div></div>'+'<div id="cke_FlashPreviewBox'+CKEDITOR.tools.getNextNumber()+'" class="FlashPreviewBox"></div></div>';return{title:k.lang.flash.title,minWidth:560,minHeight:310,selectPopupWindowComponent:null,onShow:function(){var B=this;B.fakeImage=B.objectNode=B.embedNode=null;n=new CKEDITOR.dom.element('embed',k.document);var p=B.getSelectedElement();if(p&&p.data('cke-real-element-type')&&p.data('cke-real-element-type')=='flash'){B.fakeImage=p;var q=k.restoreRealElement(p),r=null,s=null,t={};if(q.getName()=='cke:object'){r=q;var u=r.getElementsByTag('embed','cke');if(u.count()>0)s=u.getItem(0);var v=r.getElementsByTag('param','cke');for(var w=0,x=v.count();w<x;w++){var y=v.getItem(w),z=y.getAttribute('name'),A=y.getAttribute('value');t[z]=A;}}else if(q.getName()=='cke:embed')s=q;B.objectNode=r;B.embedNode=s;B.setupContent(r,s,t,p);}},onOk:function(){var z=this;var p=null,q=null,r=null;if(!z.fakeImage){if(l){p=CKEDITOR.dom.element.createFromHtml('<cke:object></cke:object>',k.document);var s={classid:'clsid:d27cdb6e-ae6d-11cf-96b8-444553540000',codebase:'http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0'};
p.setAttributes(s);}if(m){q=CKEDITOR.dom.element.createFromHtml('<cke:embed></cke:embed>',k.document);q.setAttributes({type:'application/x-shockwave-flash',pluginspage:'http://www.macromedia.com/go/getflashplayer'});if(p)q.appendTo(p);}}else{p=z.objectNode;q=z.embedNode;}if(p){r={};var t=p.getElementsByTag('param','cke');for(var u=0,v=t.count();u<v;u++)r[t.getItem(u).getAttribute('name')]=t.getItem(u);}var w={},x={};z.commitContent(p,q,r,w,x);var y=k.createFakeElement(p||q,'cke_flash','flash',true);y.setAttributes(x);y.setStyles(w);if(z.fakeImage){y.replace(z.fakeImage);k.getSelection().selectElement(y);}else k.insertElement(y);},onHide:function(){var p=this;if(p.preview)p.preview.setHtml('');if(p.selectPopupWindowComponent){p.selectPopupWindowComponent.dispose();p.selectPopupWindowComponent=null;p.selectPopupWindowComponent;}},contents:[{id:'info',label:k.lang.common.generalTab,accessKey:'I',elements:[{type:'vbox',padding:0,children:[{type:'hbox',widths:['280px','110px'],align:'right',children:[{id:'src',type:'text',label:k.lang.common.url,required:true,validate:CKEDITOR.dialog.validate.notEmpty(k.lang.flash.validateSrc),setup:h,commit:i,onLoad:function(){var p=this.getDialog(),q=function(r){n.setAttribute('src',r);p.preview.setHtml('<embed height="100%" width="100%" src="'+CKEDITOR.tools.htmlEncode(n.getAttribute('src'))+'" type="application/x-shockwave-flash"></embed>');};p.preview=p.getContentElement('info','preview').getElement().getChild(3);this.on('change',function(r){if(r.data&&r.data.value)q(r.data.value);});this.getInputElement().on('change',function(r){q(this.getValue());},this);}}]},{type:'hbox',widths:['30%','70%'],children:[{type:'button',id:'browse',style:'display:inline-block;margin-top:10px;',label:k.lang.common.browseServer,onClick:jQuery.proxy(j,false)},{type:'button',id:'browseContent',style:'display:inline-block;margin-top: 10px;',label:k.lang.common.browseContentLibrary,onClick:jQuery.proxy(j,true)}]}]},{type:'hbox',widths:['25%','25%','25%','25%','25%'],children:[{type:'text',id:'width',style:'width:95px',label:k.lang.common.width,validate:CKEDITOR.dialog.validate.htmlLength(k.lang.common.invalidHtmlLength.replace('%1',k.lang.common.width)),setup:h,commit:i},{type:'text',id:'height',style:'width:95px',label:k.lang.common.height,validate:CKEDITOR.dialog.validate.htmlLength(k.lang.common.invalidHtmlLength.replace('%1',k.lang.common.height)),setup:h,commit:i},{type:'text',id:'hSpace',style:'width:95px',label:k.lang.flash.hSpace,validate:CKEDITOR.dialog.validate.integer(k.lang.flash.validateHSpace),setup:h,commit:i},{type:'text',id:'vSpace',style:'width:95px',label:k.lang.flash.vSpace,validate:CKEDITOR.dialog.validate.integer(k.lang.flash.validateVSpace),setup:h,commit:i}]},{type:'vbox',children:[{type:'html',id:'preview',style:'width:95%;',html:o}]}]},{id:'Upload',hidden:true,filebrowser:'uploadButton',label:k.lang.common.upload,elements:[{type:'file',id:'upload',label:k.lang.common.upload,size:38},{type:'fileButton',id:'uploadButton',label:k.lang.common.uploadSubmit,filebrowser:'info:src','for':['Upload','upload']}]},{id:'properties',label:k.lang.flash.propertiesTab,elements:[{type:'hbox',widths:['50%','50%'],children:[{id:'scale',type:'select',label:k.lang.flash.scale,'default':'',style:'width : 100%;',items:[[k.lang.common.notSet,''],[k.lang.flash.scaleAll,'showall'],[k.lang.flash.scaleNoBorder,'noborder'],[k.lang.flash.scaleFit,'exactfit']],setup:h,commit:i},{id:'allowScriptAccess',type:'select',label:k.lang.flash.access,'default':'',style:'width : 100%;',items:[[k.lang.common.notSet,''],[k.lang.flash.accessAlways,'always'],[k.lang.flash.accessSameDomain,'samedomain'],[k.lang.flash.accessNever,'never']],setup:h,commit:i}]},{type:'hbox',widths:['50%','50%'],children:[{id:'wmode',type:'select',label:k.lang.flash.windowMode,'default':'',style:'width : 100%;',items:[[k.lang.common.notSet,''],[k.lang.flash.windowModeWindow,'window'],[k.lang.flash.windowModeOpaque,'opaque'],[k.lang.flash.windowModeTransparent,'transparent']],setup:h,commit:i},{id:'quality',type:'select',label:k.lang.flash.quality,'default':'high',style:'width : 100%;',items:[[k.lang.common.notSet,''],[k.lang.flash.qualityBest,'best'],[k.lang.flash.qualityHigh,'high'],[k.lang.flash.qualityAutoHigh,'autohigh'],[k.lang.flash.qualityMedium,'medium'],[k.lang.flash.qualityAutoLow,'autolow'],[k.lang.flash.qualityLow,'low']],setup:h,commit:i}]},{type:'hbox',widths:['50%','50%'],children:[{id:'align',type:'select',label:k.lang.common.align,'default':'',style:'width : 100%;',items:[[k.lang.common.notSet,''],[k.lang.common.alignLeft,'left'],[k.lang.flash.alignAbsBottom,'absBottom'],[k.lang.flash.alignAbsMiddle,'absMiddle'],[k.lang.flash.alignBaseline,'baseline'],[k.lang.common.alignBottom,'bottom'],[k.lang.common.alignMiddle,'middle'],[k.lang.common.alignRight,'right'],[k.lang.flash.alignTextTop,'textTop'],[k.lang.common.alignTop,'top']],setup:h,commit:function(p,q,r,s,t){var u=this.getValue();
i.apply(this,arguments);u&&(t.align=u);}},{type:'html',html:'<div></div>'}]},{type:'fieldset',label:CKEDITOR.tools.htmlEncode(k.lang.flash.flashvars),children:[{type:'vbox',padding:0,children:[{type:'checkbox',id:'menu',label:k.lang.flash.chkMenu,'default':true,setup:h,commit:i},{type:'checkbox',id:'play',label:k.lang.flash.chkPlay,'default':true,setup:h,commit:i},{type:'checkbox',id:'loop',label:k.lang.flash.chkLoop,'default':true,setup:h,commit:i},{type:'checkbox',id:'allowFullScreen',label:k.lang.flash.chkFull,'default':true,setup:h,commit:i}]}]}]},{id:'advanced',label:k.lang.common.advancedTab,elements:[{type:'hbox',widths:['45%','55%'],children:[{type:'text',id:'id',label:k.lang.common.id,setup:h,commit:i},{type:'text',id:'title',label:k.lang.common.advisoryTitle,setup:h,commit:i}]},{type:'hbox',widths:['45%','55%'],children:[{type:'text',id:'bgcolor',label:k.lang.flash.bgcolor,setup:h,commit:i},{type:'text',id:'class',label:k.lang.common.cssClass,setup:h,commit:i}]},{type:'text',id:'style',label:k.lang.common.cssStyle,setup:h,commit:i}]}]};});})();})();
