@model  VisualEditorConfigViewModel

@using Quantumart.QP8.WebMvc.ViewModels.VisualEditorConfig 

(function () {
@foreach (var plugin in Model.Plugins.Where(n => !String.IsNullOrWhiteSpace(n.Url)))
    {
        @:CKEDITOR.plugins.addExternal('@MvcHtmlString.Create(plugin.Name)', '@MvcHtmlString.Create(plugin.Url)', 'plugin.js');
    }
})();

CKEDITOR.editorConfig = function (config) {
	{
		{
            config.format_tags = 'p';@*костыль для нормальной работы ckEditor!!!*@
            @if(Model.Formats.Count() != 0)
            {
                @:config.format_tags = '@Model.FormatTags';                
            }
            
            @foreach(var format in Model.Formats)
            {
                @VisualEditorStyleConfigHelper.IncludeFormat(format);
            }            

			config.skin = 'qp8';
			config.browserContextMenuOnCtrl = false;
			config.disableNativeSpellChecker = true;
			config.disableNativeTableHandles = true;
			config.resize_dir = 'both';
			config.resize_minWidth = 640;
			config.resize_minHeight = 250;
			config.resize_maxHeight = 1024;
			config.docType = '@Model.DocType';
			config.enterMode = @Model.EnterMode;
			config.shiftEnterMode = @Model.ShiftEnterMode;            
			config.fullPage = @Model.FullPage;            
			config.height = @Model.Height;
			config.language = '@Model.Language';
			config.useEnglishQuotes = @Model.UseEnglishQuotes;

			config.extraPlugins = 'linebreak,cleaner,qspecchar,typographer,removeEmptyP,aspell';
			
            @foreach (var plugin in Model.Plugins)
			{				
                @: config.extraPlugins += ',@MvcHtmlString.Create(plugin.Name)';
			}
            
            config.contentsCss = [@Model.ContentsCss];

            @if (!String.IsNullOrEmpty(Model.BodyClass))
            {
                @:config.bodyClass = '@Model.BodyClass';
            }

			config.toolbar =  @Model.Toolbar;

            config.stylesSet =
            [
                @VisualEditorStyleConfigHelper.StylesIncludeBlock(Model.Styles)
            ];
		}
	} 
};


