var EVENT_TYPE_SEARCH_BLOCK_FIND_START="OnSearchBlockFindStart",EVENT_TYPE_CONTEXT_BLOCK_FIND_START="OnContextBlockFindStart",EVENT_TYPE_SEARCH_BLOCK_RESET_START="OnSearchBlockResetStart",EVENT_TYPE_SEARCH_BLOCK_RESIZED="OnSearchBlockResized",EVENT_TYPE_CONRETE_FIELD_SEARCH_CONTAINER_CLOSE="OnFieldSearchContainerClose";Quantumart.QP8.BackendSearchBlockBase=function(n,t,i,r,u){Quantumart.QP8.BackendSearchBlockBase.initializeBase(this);this._searchBlockGroupCode=n;this._searchBlockElementId=t;this._entityTypeCode=i;this._parentEntityId=r;$q.isObject(u)&&(u.searchBlockContainerElementId&&(this._searchBlockContainerElementId=u.searchBlockContainerElementId),u.tabId&&(this._tabId=u.tabId,this._hostId=u.tabId),u.popupWindowId&&(this._popupWindowId=u.popupWindowId,this._hostId=u.popupWindowId),u.minSearchBlockHeight&&(this._minSearchBlockHeight=u.minSearchBlockHeight),u.maxSearchBlockHeight&&(this._maxSearchBlockHeight=u.maxSearchBlockHeight),u.hideButtons&&(this._hideButtons=u.hideButtons),u.actionCode&&(this._actionCode=u.actionCode),u.searchBlockState&&(this._searchBlockState=u.searchBlockState));this._onSearchBlockResizedHandler=jQuery.proxy(this._onSearchBlockResized,this);this._onFindButtonClickHandler=jQuery.proxy(this._onFindButtonClick,this);this._onResetButtonClickHandler=jQuery.proxy(this._onResetButtonClick,this);this._onSearchFormSubmittedHandler=jQuery.proxy(this._onSearchFormSubmitted,this)};Quantumart.QP8.BackendSearchBlockBase.prototype={_searchBlockGroupCode:"",_searchBlockElementId:"",_searchBlockElement:null,_searchBlockContainerElementId:"",_tabId:"",_popupWindowId:"",_hostId:"",_actionCode:null,_concreteSearchBlockElement:null,_buttonsWrapperElement:null,_findButtonElement:null,_resetButtonElement:null,_entityTypeCode:"",_parentEntityId:0,_minSearchBlockHeight:180,_maxSearchBlockHeight:500,_lastSearchBlockHeight:500,_isVisible:!1,_isRendered:!1,_verticalResizerComponent:null,_hideButtons:!1,_searchBlockState:null,_onSearchBlockResizedHandler:null,_onFindButtonClickHandler:null,_onResetButtonClickHandler:null,get_searchBlockGroupCode:function(){return this._searchBlockGroupCode},set_searchBlockGroupCode:function(n){this._searchBlockGroupCode=n},get_searchBlockElementId:function(){return this._searchBlockElementId},set_searchBlockElementId:function(n){this._searchBlockElementId=n},get_searchBlockElement:function(){return this._searchBlockElement},get_searchBlockContainerElementId:function(){return this._searchBlockContainerElementId},set_searchBlockContainerElementId:function(n){this._searchBlockContainerElementId=n},get_entityTypeCode:function(){return this._entityTypeCode},set_entityTypeCode:function(n){this._entityTypeCode=n},get_parentEntityId:function(){return this._parentEntityId},set_parentEntityId:function(n){this._parentEntityId=n},get_minSearchBlockHeight:function(){return this._minSearchBlockHeight},set_minSearchBlockHeight:function(n){this._minSearchBlockHeight=n},get_maxSearchBlockHeight:function(){return this._maxSearchBlockHeight},set_maxSearchBlockHeight:function(n){this._maxSearchBlockHeight=n},get_isRendered:function(){return this._isRendered},set_isRendered:function(n){this._isRendered=n},initialize:function(){var n=jQuery("#"+this._searchBlockElementId),e=!$q.isNullOrEmpty(n),o=!$q.isNullOrEmpty(n.find("FORM")),i,u,t,r,f;e||(n=jQuery("<div />",{id:this._searchBlockElementId,"class":"searchBlock",css:{display:"none"}}));o||(i=jQuery("<form />",{"class":"formLayout"}),n.append(i),u=jQuery("<div />"),i.append(u),t=jQuery("<div />"),this._hideButtons&&t.hide(),i.append(t),r=jQuery("<input />",{type:"button",value:$l.SearchBlock.findButtonText,"class":"button"}),t.append(r),f=jQuery("<input />",{type:"button",value:$l.SearchBlock.resetButtonText,"class":"button"}),t.append("&nbsp;"),t.append(f),this._concreteSearchBlockElement=u.get(0),this._findButtonElement=r.get(0),this._resetButtonElement=f.get(0),this._searchForm=i.get(0),this._buttonsWrapperElement=t.get(0));e||($q.isNullOrWhiteSpace(this._searchBlockContainerElementId)?jQuery("BODY:first").append(n):jQuery("#"+this._searchBlockContainerElementId).append(n));n.verticalResizer({bottomHandleCssClassName:"searchBottomHandle",minPanelHeight:this._minSearchBlockHeight,maxPanelHeight:this._maxSearchBlockHeight});this._verticalResizerComponent=n.data("vertical_resizer");this._searchBlockElement=n.get(0);this._lastSearchBlockHeight=this._minSearchBlockHeight;o||this._attachSearchBlockEventHandlers();t=null;u=null;r=null;f=null;n=null;i=null;r=null},_attachSearchBlockEventHandlers:function(){var i=jQuery(this._searchBlockElement),n,t,r;i.bind("resize",this._onSearchBlockResizedHandler);i=null;n=jQuery(this._findButtonElement);n.bind("click",this._onFindButtonClickHandler);n=null;t=jQuery(this._resetButtonElement);t.bind("click",this._onResetButtonClickHandler);t=null;r=jQuery(this._searchForm);r.bind("submit",this._onSearchFormSubmittedHandler);n=null;t=null;i=null;r=null},_detachSearchBlockEventHandlers:function(){var t=jQuery(this._searchBlockElement),n,i,r;t.unbind("resize",this._onSearchBlockResizedHandler);t=null;n=jQuery(this._findButtonElement);n.unbind("click",this._onFindButtonClickHandler);n=null;i=jQuery(this._resetButtonElement);i.unbind("click",this._onResetButtonClickHandler);r=jQuery(this._searchForm);r.unbind("submit");n=null;i=null;t=null;r=null},showSearchBlock:function(){var t,n;this._isVisible=!0;t=jQuery(this._searchBlockElement);t.is(":hidden")&&(n=this._verticalResizerComponent,n&&(n.showPanelWrapper(),n.showBottomHandle()),t.show().height(this._lastSearchBlockHeight).trigger("resize"))},hideSearchBlock:function(){var t,n;this._isVisible=!1;t=jQuery(this._searchBlockElement);t.is(":visible")&&(n=this._verticalResizerComponent,n&&n.hideBottomHandle(),this._lastSearchBlockHeight=parseInt(t.height(),10),t.height(0).hide().trigger("resize"),n&&n.hidePanelWrapper())},renderSearchBlock:function(){this.set_isRendered(!0)},_onSearchBlockResized:function(){var t=jQuery(this._searchBlockElement),i=null,u,n,r;this._verticalResizerComponent&&(i=jQuery(this._verticalResizerComponent.get_bottomHandleElement()));u=parseInt(t.width(),10);n=0;this._isVisible?(n=parseInt(t.outerHeight(),10),$q.isNullOrEmpty(i)||(n+=parseInt(i.outerHeight(),10))):n=parseInt(t.height(),10);t=null;i=null;r=new Quantumart.QP8.BackendSearchBlockEventArgs(0,"");r.set_searchBlockWidth(u);r.set_searchBlockHeight(n);this.notify(EVENT_TYPE_SEARCH_BLOCK_RESIZED,r)},_onFindButtonClick:function(){var n=new Quantumart.QP8.BackendSearchBlockEventArgs(0,"");this.notify(EVENT_TYPE_SEARCH_BLOCK_FIND_START,n);n=null},_onResetButtonClick:function(){var n=new Quantumart.QP8.BackendSearchBlockEventArgs(0,"");this.notify(EVENT_TYPE_SEARCH_BLOCK_RESET_START,n);n=null},_onSearchFormSubmitted:function(n){return n.preventDefault(),jQuery(this._findButtonElement).trigger("click"),!1},dispose:function(){if(Quantumart.QP8.BackendSearchBlockBase.callBaseMethod(this,"dispose"),this._detachSearchBlockEventHandlers(),this._verticalResizerComponent=null,this._concreteSearchBlockElement=null,this._findButtonElement=null,this._resetButtonElement=null,this._buttonsWrapperElement=null,this._searchBlockElement){var n=jQuery(this._searchBlockElement);n.noVerticalResizer().empty().remove();n=null;this._searchBlockElement=null}this._onSearchBlockResizedHandler=null;this._onFindButtonClickHandler=null;this._onResetButtonClickHandler=null;this._onSearchFormSubmittedHandler=null}};Quantumart.QP8.BackendSearchBlockBase.generateElementPrefix=function(){return"q"+$q.generateRandomString(6)};Quantumart.QP8.BackendSearchBlockBase.registerClass("Quantumart.QP8.BackendSearchBlockBase",Quantumart.QP8.Observable);Quantumart.QP8.BackendSearchBlockEventArgs=function(n,t){Quantumart.QP8.BackendSearchBlockEventArgs.initializeBase(this);this._searchBlockType=n;this._searchQuery=t};Quantumart.QP8.BackendSearchBlockEventArgs.prototype={_searchBlockType:0,_searchQuery:null,_searchBlockWidth:0,_searchBlockHeight:0,_searchBlockState:null,get_searchQuery:function(){return this._searchQuery},set_searchQuery:function(n){this._searchQuery=n},get_searchBlockType:function(){return this._searchBlockType},set_searchBlockType:function(n){this._searchBlockType=n},get_searchBlockWidth:function(){return this._searchBlockWidth},set_searchBlockWidth:function(n){this._searchBlockWidth=n},get_searchBlockHeight:function(){return this._searchBlockHeight},set_searchBlockHeight:function(n){this._searchBlockHeight=n},set_searchBlockState:function(n){this._searchBlockState=n},get_searchBlockState:function(){return this._searchBlockState}};Quantumart.QP8.BackendSearchBlockEventArgs.registerClass("Quantumart.QP8.BackendSearchBlockEventArgs",Sys.EventArgs);