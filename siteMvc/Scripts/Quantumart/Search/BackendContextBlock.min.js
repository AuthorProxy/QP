Quantumart.QP8.BackendContextBlock=function(n,t,i,r,u){Quantumart.QP8.BackendContextBlock.initializeBase(this,[n,t,i,r,u]);this._onChangeComboHandler=jQuery.proxy(this._onChangeCombo,this)};Quantumart.QP8.BackendContextBlock.prototype={_minSearchBlockHeight:80,_maxSearchBlockHeight:80,_contendGroupListElement:null,_siteListElement:null,_contentNameElement:null,_searchBlockState:null,get_searchBlockState:function(){return this._searchBlockState},_restore_searchBlockState:function(){if(this._searchBlockState){var n=jQuery.map(this._searchBlockState,function(n){return{fieldName:n.Name,value:n.Value}});$c.setAllEntityDataListValues(this._searchBlockElement,n)}},_compute_searchBlockState:function(){var n=[];return jQuery(".contextSwitcher .stateField",this._searchBlockElement).each(function(){var t=jQuery(this);n.push({Name:t.prop("name"),Value:t.prop("value"),FieldId:t.closest(".contextSwitcher").data("list_id")})}),n},get_searchQuery:function(){return JSON.stringify(this.get_searchBlockState())},renderSearchBlock:function(){var n,t;this._isRendered||($q.getJsonFromUrl("GET",CONTROLLER_URL_ARTICLE_SEARCH_BLOCK+"ContextBlock/"+this._parentEntityId,{actionCode:this._actionCode,hostId:this._hostId},!1,!1,function(t){t.success?n=t.view:alert(t.message)},function(t){n=null;$q.processGenericAjaxError(t)}),$q.isNullOrWhiteSpace(n)||(jQuery(this._concreteSearchBlockElement).html(n),$c.initAllEntityDataLists(this._searchBlockElement),this._restore_searchBlockState(),t=this,jQuery(".contextSwitcher").each(function(){var n=$(this).data("entity_data_list_component");n.attachObserver(EVENT_TYPE_ENTITY_LIST_SELECTION_CHANGED,t._onChangeComboHandler)})),this._isRendered=!0)},_onChangeCombo:function(){this._searchBlockState=this._compute_searchBlockState();jQuery(this._findButtonElement).trigger("click")},_onFindButtonClick:function(){var t=this.get_searchBlockState(),n=new Quantumart.QP8.BackendSearchBlockEventArgs(0,JSON.stringify(t));n.set_searchBlockState(t);this.notify(EVENT_TYPE_CONTEXT_BLOCK_FIND_START,n);n=null},_onResetButtonClick:function(){},dispose:function(){var n=this;jQuery(".contextSwitcher").each(function(){var t=$(this).data("entity_data_list_component");t.detachObserver(EVENT_TYPE_ENTITY_LIST_SELECTION_CHANGED,n._onChangeComboHandler)});$c.destroyAllEntityDataLists(this._searchBlockElement);Quantumart.QP8.BackendContextBlock.callBaseMethod(this,"dispose")}};Quantumart.QP8.BackendContextBlock.registerClass("Quantumart.QP8.BackendContextBlock",Quantumart.QP8.BackendSearchBlockBase);