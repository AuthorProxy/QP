Quantumart.QP8.BackendArticleSearchBlock=function(n,t,i,r,u){Quantumart.QP8.BackendArticleSearchBlock.initializeBase(this,[n,t,i,r,u]);this.isVirtual=u.isVirtual;this._minSearchBlockHeight=this.isVirtual?125:180};Quantumart.QP8.BackendArticleSearchBlock.prototype={_fullTextBlockElement:null,_fullTextBlock:null,_fieldSearchBlockElement:null,_fieldSearchBlock:null,_isVirtualArticles:!1,_$defaultFilterButton:null,_defaultFieldSearchBlockState:null,initialize:function(){if(Quantumart.QP8.BackendArticleSearchBlock.callBaseMethod(this,"initialize"),this._searchBlockState&&this._searchBlockState.defaultFieldSearchBlockState&&this._buttonsWrapperElement){this._defaultFieldSearchBlockState=this._searchBlockState.defaultFieldSearchBlockState;var n=jQuery(this._buttonsWrapperElement);this._$defaultFilterButton=jQuery("<input />",{type:"button",value:$l.SearchBlock.defaultFilterButtonText,"class":"button"});n.append("&nbsp;");n.append(this._$defaultFilterButton);n=null;this._$defaultFilterButton.click(jQuery.proxy(this._onDefaultFilterClicked,this))}},renderSearchBlock:function(){var n,t,i;this.get_isRendered()!==!0&&(n=jQuery(this._concreteSearchBlockElement),this.isVirtual||(t=jQuery("<div/>",{"class":"articleSearchRegion"}),this._fullTextBlockElement=t.get(0),this._fullTextBlock=new Quantumart.QP8.BackendArticleSearchBlock.FullTextBlock(this._fullTextBlockElement,this.get_parentEntityId()),this._fullTextBlock.initialize(),n.append(t)),i=jQuery("<div/>",{"class":"articleSearchRegion"}),this._fieldSearchBlockElement=i.get(0),this._fieldSearchBlock=new Quantumart.QP8.BackendArticleSearchBlock.FieldSearchBlock(this._fieldSearchBlockElement,this.get_parentEntityId()),this._fieldSearchBlock.initialize(),n.append(i),this._restore_searchBlockState(),this.set_isRendered(!0),n=null,t=null,i=null)},_restore_searchBlockState:function(){this._searchBlockState&&(this._searchBlockState.fullTextBlockState&&this._fullTextBlock.restore_blockState(this._searchBlockState.fullTextBlockState),this._searchBlockState.fieldSearchBlockState&&this._fieldSearchBlock.restore_blockState(this._searchBlockState.fieldSearchBlockState))},get_searchQuery:function(){var n=[],t,i;return this._fullTextBlock&&(t=this._fullTextBlock.get_searchQuery(),t&&n.push(t)),this._fieldSearchBlock&&(i=this._fieldSearchBlock.get_searchQuery(),i&&(n=n.concat(i))),JSON.stringify(n)},get_searchBlockState:function(){var n=null;return this._searchBlockState={},this._fullTextBlock&&(n=this._fullTextBlock.get_blockState(),n&&(this._searchBlockState.fullTextBlockState=n)),this._fieldSearchBlock&&(n=this._fieldSearchBlock.get_blockState(),n&&(this._searchBlockState.fieldSearchBlockState=n)),this._defaultFieldSearchBlockState&&(this._searchBlockState.defaultFieldSearchBlockState=this._defaultFieldSearchBlockState),jQuery.isEmptyObject(this._searchBlockState)&&(this._searchBlockState=null),this._searchBlockState},_onFindButtonClick:function(){var n=new Quantumart.QP8.BackendSearchBlockEventArgs(0,this.get_searchQuery());n.set_searchBlockState(this.get_searchBlockState());this.notify(EVENT_TYPE_SEARCH_BLOCK_FIND_START,n);n=null},_onResetButtonClick:function(){this._fullTextBlock&&this._fullTextBlock.clear();this._fieldSearchBlock&&this._fieldSearchBlock.clear();this._onFindButtonClick()},_onDefaultFilterClicked:function(){this._defaultFieldSearchBlockState&&(this._fullTextBlock&&this._fullTextBlock.clear(),this._fieldSearchBlock&&this._fieldSearchBlock.clear(),this._searchBlockState={fieldSearchBlockState:this._defaultFieldSearchBlockState,defaultFieldSearchBlockState:this._defaultFieldSearchBlockState},this._restore_searchBlockState(),this._onFindButtonClick())},dispose:function(){Quantumart.QP8.BackendArticleSearchBlock.callBaseMethod(this,"dispose");this._fullTextBlock&&this._fullTextBlock.dispose();this._fullTextBlock=null;this._fullTextBlockElement=null;this._fieldSearchBlock&&this._fieldSearchBlock.dispose();this._fieldSearchBlock=null;this._fieldSearchBlockElement=null;this._$defaultFilterButton&&this._$defaultFilterButton.off();this._$defaultFilterButton=null}};Quantumart.QP8.BackendArticleSearchBlock.createFieldSearchQuery=function(n,t,i,r,u){return{SearchType:n,FieldID:t,FieldColumn:i,ContentId:r,ReferenceFieldId:u,QueryParams:Array.prototype.slice.call(arguments,5)}};Quantumart.QP8.BackendArticleSearchBlock.registerClass("Quantumart.QP8.BackendArticleSearchBlock",Quantumart.QP8.BackendSearchBlockBase);