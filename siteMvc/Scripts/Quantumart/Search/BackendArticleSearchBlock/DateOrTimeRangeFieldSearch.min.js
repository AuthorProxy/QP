Quantumart.QP8.BackendArticleSearchBlock.DateOrTimeRangeFieldSearch=function(n,t,i,r,u,f,e,o,s){Quantumart.QP8.BackendArticleSearchBlock.DateOrTimeRangeFieldSearch.initializeBase(this,[n,t,i,r,u,f,e,o]);this._rangeType=s;this._onIsNullCheckBoxChangeHandler=jQuery.proxy(this._onIsNullCheckBoxChange,this);this._onByValueSelectorChangedHandler=jQuery.proxy(this._onByValueSelectorChanged,this);this._onLoadHandler=jQuery.proxy(this._onLoad,this)};Quantumart.QP8.BackendArticleSearchBlock.DateOrTimeRangeFieldSearch.prototype={initialize:function(){var i,t=CONTROLLER_URL_ARTICLE_SEARCH_BLOCK,r;switch(this._rangeType){case $e.ArticleFieldSearchType.DateRange:t+="DateRange";break;case $e.ArticleFieldSearchType.TimeRange:t+="TimeRange";break;case $e.ArticleFieldSearchType.DateTimeRange:t+="DateTimeRange";break;default:t+="TimeRange"}if($q.getJsonFromUrl("GET",t,{elementIdPrefix:this._elementIdPrefix},!1,!1,function(n){n.success?i=n.view:alert(n.message)},function(n){i=null;$q.processGenericAjaxError(n)}),!$q.isNullOrWhiteSpace(i)){var u=this._elementIdPrefix+"_isNullCheckBox",f=this._elementIdPrefix+"_dateFrom",e=this._elementIdPrefix+"_dateTo",n=jQuery(this._containerElement);n.html(i);this._dateFromElement=n.find("#"+f).get(0);this._dateToElement=n.find("#"+e).get(0);$c.disableDateTimePicker(this._dateToElement);r=n.find("#"+u);r.bind("change",this._onIsNullCheckBoxChangeHandler);this._isNullCheckBoxElement=r.get(0);jQuery(".radioButtonsList input[type='radio']",n).click(this._onByValueSelectorChangedHandler);jQuery(document).ready(this._onLoadHandler);r=null;n=null}},get_searchQuery:function(){return Quantumart.QP8.BackendArticleSearchBlock.createFieldSearchQuery(this._rangeType,this._fieldID,this._fieldColumn,this._contentID,this._referenceFieldID,this.get_IsNull(),$c.getDateTimePickerValue(this._dateFromElement),$c.getDateTimePickerValue(this._dateToElement),this._isByValue)},get_blockState:function(){return new Quantumart.QP8.BackendArticleSearchBlock.FieldSearchState(this._rangeType,this._fieldID,this._contentID,this._fieldColumn,this._fieldName,this._fieldGroup,this._referenceFieldID,{isNull:this.get_IsNull(),from:$c.getDateTimePickerValue(this._dateFromElement),to:$c.getDateTimePickerValue(this._dateToElement),isByValue:this._isByValue})},get_filterDetails:function(){var n=this.get_blockState().data;return n.isNull?$l.SearchBlock.isNullCheckBoxLabelText:n.isByValue?n.from?n.from:"?":(n.from?n.from:"?")+" - "+(n.to?n.to:"?")},restore_blockState:function(n){if(n){if(this._isNullCheckBoxElement){var t=jQuery(this._isNullCheckBoxElement);t.prop("checked",n.isNull);t.trigger("change");t=null}$q.isNull(n.isByValue)||(n.isByValue===!0?jQuery(".radioButtonsList input:radio[value=0]",this._containerElement).prop("checked",!0).trigger("click"):n.isByValue===!1&&jQuery(".radioButtonsList input:radio[value=1]",this._containerElement).prop("checked",!0).trigger("click"));$c.setDateTimePickerValue(this._dateFromElement,n.from);$c.setDateTimePickerValue(this._dateToElement,n.to)}},_onIsNullCheckBoxChange:function(){this.get_IsNull()?($c.disableDateTimePicker(this._dateFromElement),$c.disableDateTimePicker(this._dateToElement)):($c.enableDateTimePicker(this._dateFromElement),this._isByValue||$c.enableDateTimePicker(this._dateToElement))},_onByValueSelectorChanged:function(n){this._isByValue=jQuery(n.currentTarget).val()==0;this._isByValue==!0?($c.disableDateTimePicker(this._dateToElement),jQuery(this._dateToElement).closest(".row").hide(),jQuery("label[for='"+jQuery(this._dateFromElement).attr("id")+"']",this._containerElement).text($l.SearchBlock.valueText)):(this.get_IsNull()||$c.enableDateTimePicker(this._dateToElement),jQuery("label[for='"+jQuery(this._dateFromElement).attr("id")+"']",this._containerElement).text($l.SearchBlock.fromText),jQuery(this._dateToElement).closest(".row").show())},_onLoad:function(){$c.initAllDateTimePickers(this._containerElement)},dispose:function(){var n,t;this._isNullCheckBoxElement&&(n=jQuery(this._isNullCheckBoxElement),n.unbind("change",this._onIsNullCheckBoxChangeHandler),n=null);t=jQuery(this._containerElement);jQuery(".radioButtonsList input[type='radio']",t).unbind();t=null;$c.destroyAllDateTimePickers(this._containerElement);this._isNullCheckBoxElement=null;this._dateFromElement=null;this._dateToElement=null;this._onIsNullCheckBoxChangeHandler=null;this._onByValueSelectorChangedHandler=null;this._onLoadHandler=null;Quantumart.QP8.BackendArticleSearchBlock.DateOrTimeRangeFieldSearch.callBaseMethod(this,"dispose")},_onIsNullCheckBoxChangeHandler:null,get_IsNull:function(){return this._isNullCheckBoxElement?jQuery(this._isNullCheckBoxElement).is(":checked"):!1},_rangeType:null,_isByValue:!0,_isNullCheckBoxElement:null,_dateFromElement:null,_dateToElement:null};Quantumart.QP8.BackendArticleSearchBlock.DateOrTimeRangeFieldSearch.registerClass("Quantumart.QP8.BackendArticleSearchBlock.DateOrTimeRangeFieldSearch",Quantumart.QP8.BackendArticleSearchBlock.FieldSearchBase);