Quantumart.QP8.BackendArticleSearchBlock.FieldSearchContainer=function(n,t,i,r,u,f,e,o,s){Quantumart.QP8.BackendArticleSearchBlock.FieldSearchContainer.initializeBase(this);this._containerElement=n;this._fieldID=i;this._contentID=r;this._fieldName=u;this._fieldSearchType=$q.toInt(f,0);this._fieldColumn=e;this._fieldGroup=o;this._referenceFieldId=s;this._parentEntityId=t;this._elementIdPrefix=Quantumart.QP8.BackendSearchBlockBase.generateElementPrefix();this._onCloseButtonClickHandler=jQuery.proxy(this._onCloseButtonClick,this);this._onContentOpenWindowClickHandler=jQuery.proxy(this._onContentOpenWindowClick,this);this._onCloseWndClickHandler=jQuery.proxy(this._onCloseWndClick,this)};Quantumart.QP8.BackendArticleSearchBlock.FieldSearchContainer.prototype={_containerElement:null,_fieldID:null,_contentID:null,_fieldName:null,_fieldSearchType:0,_fieldColumn:null,_fieldGroup:null,_referenceFieldId:null,_parentEntityId:0,_elementIdPrefix:"",_closeButtonElement:null,_closeAndApplyButton:null,_contentContainerElement:null,_contentWindowOpenLinkElement:null,$filterDetailsSpanElement:null,_fieldSearch:null,_popupWindowComponent:null,_onCloseButtonClickHandler:null,_onContentOpenWindowClickHandler:null,initialize:function(){var r=new $.telerik.stringBuilder,n,t,i;r.cat('<div class="fieldSearchContainerHeader group">').cat('<div class="title"><a href="javascript:void(0)" class="open-link js">').cat(this._fieldGroup?this._fieldGroup+": "+this._fieldName:this._fieldName).cat('<span class="filter-details"><\/span>').cat("<\/a><\/div>").cat("<div ").cat(' id="'+$q.htmlEncode(this._elementIdPrefix+"_CloseButton")+'"').cat(' class="closeButton"').cat(' title="'+$q.htmlEncode($l.SearchBlock.closeFieldSearchContainerButtonText)+'"').cat(">").cat("<\/div>").cat("<\/div>");n=jQuery(r.string());t=n.find("#"+this._elementIdPrefix+"_CloseButton");t.bind("click",this._onCloseButtonClickHandler);this._closeButtonElement=t.get(0);i=jQuery(".open-link",n);i.click(this._onContentOpenWindowClickHandler);this._contentWindowOpenLinkElement=i.get(0);this.$filterDetailsSpanElement=jQuery(".filter-details",n);jQuery(this._containerElement).append(n);n=null;t=null;$contentContainer=null;i=null},get_ContainerElement:function(){return this._containerElement},get_searchQuery:function(){return this._fieldSearch?this._fieldSearch.get_searchQuery():null},get_blockState:function(){if(this._fieldSearch)return this._fieldSearch.get_blockState()},restore_blockState:function(n){var t;return this._createFieldSearchComponent(!1),this._savedWindowState=n,this._fieldSearch?(this._fieldSearch.set_blockState(n),this._fieldSearch.initialize(),t=this._fieldSearch.restore_blockState(n,!1),this.$filterDetailsSpanElement.html(": "+this._fieldSearch.get_filterDetails()),t):void 0},_createFieldSearchComponent:function(n){var u=(new $.telerik.stringBuilder).cat('<form class="formLayout">').cat('<div class="fieldSearchContainerContent"><\/div>').cat("<div>").cat('<input class="button closeAndApplyFilter" type="button" value="'+$l.SearchBlock.closeAndApplyWndButtonText+'">').cat('<input class="button closeFilter" type="button" value="'+$l.SearchBlock.closeWndButtonText+'">').cat("<\/form>").string(),i=this._getWindowSize(),r,t;this._popupWindowComponent=$.telerik.window.create({title:$l.SearchBlock.filterSettings+this._fieldName,html:u,width:i.w,height:i.h,modal:!0,resizable:!1,draggable:!1,visible:n}).data("tWindow").center();i=null;jQuery(this._popupWindowComponent.element).bind("close",jQuery.proxy(this._onPopupWindowClose,this));this._contentContainerElement=jQuery(".fieldSearchContainerContent",this._popupWindowComponent.element).get(0);jQuery("form",this._popupWindowComponent.element).submit(jQuery.proxy(this._onFilterFormSubmitted,this));r=jQuery(".closeFilter",this._popupWindowComponent.element);r.click(this._onCloseWndClickHandler);r=null;t=jQuery(".closeAndApplyFilter",this._popupWindowComponent.element);this._closeAndApplyButton=t.get(0);t.click(jQuery.proxy(this._onCloseAndApplyWndClick,this));t=null;this._createFieldSearch()},_createFieldSearch:function(){switch(this._fieldSearchType){case Quantumart.QP8.Enums.ArticleFieldSearchType.Identifier:this._fieldSearch=new Quantumart.QP8.BackendArticleSearchBlock.IdentifierFieldSearch(this._contentContainerElement,this._parentEntityId,this._fieldID,this._contentID,this._fieldColumn,this._fieldName,this._fieldGroup,this._referenceFieldId);break;case Quantumart.QP8.Enums.ArticleFieldSearchType.Boolean:this._fieldSearch=new Quantumart.QP8.BackendArticleSearchBlock.BooleanFieldSearch(this._contentContainerElement,this._parentEntityId,this._fieldID,this._contentID,this._fieldColumn,this._fieldName,this._fieldGroup,this._referenceFieldId);break;case Quantumart.QP8.Enums.ArticleFieldSearchType.DateRange:this._fieldSearch=new Quantumart.QP8.BackendArticleSearchBlock.DateOrTimeRangeFieldSearch(this._contentContainerElement,this._parentEntityId,this._fieldID,this._contentID,this._fieldColumn,this._fieldName,this._fieldGroup,this._referenceFieldId,Quantumart.QP8.Enums.ArticleFieldSearchType.DateRange);break;case Quantumart.QP8.Enums.ArticleFieldSearchType.M2MRelation:this._fieldSearch=new Quantumart.QP8.BackendArticleSearchBlock.RelationFieldSearch(this._contentContainerElement,this._parentEntityId,this._fieldID,this._contentID,this._fieldColumn,this._fieldName,this._fieldGroup,this._referenceFieldId,Quantumart.QP8.Enums.ArticleFieldSearchType.M2MRelation);break;case Quantumart.QP8.Enums.ArticleFieldSearchType.NumericRange:this._fieldSearch=new Quantumart.QP8.BackendArticleSearchBlock.NumericRangeFieldSearch(this._contentContainerElement,this._parentEntityId,this._fieldID,this._contentID,this._fieldColumn,this._fieldName,this._fieldGroup,this._referenceFieldId);break;case Quantumart.QP8.Enums.ArticleFieldSearchType.O2MRelation:this._fieldSearch=new Quantumart.QP8.BackendArticleSearchBlock.RelationFieldSearch(this._contentContainerElement,this._parentEntityId,this._fieldID,this._contentID,this._fieldColumn,this._fieldName,this._fieldGroup,this._referenceFieldId,Quantumart.QP8.Enums.ArticleFieldSearchType.O2MRelation);break;case Quantumart.QP8.Enums.ArticleFieldSearchType.M2ORelation:this._fieldSearch=new Quantumart.QP8.BackendArticleSearchBlock.RelationFieldSearch(this._contentContainerElement,this._parentEntityId,this._fieldID,this._contentID,this._fieldColumn,this._fieldName,this._fieldGroup,this._referenceFieldId,Quantumart.QP8.Enums.ArticleFieldSearchType.M2ORelation);break;case Quantumart.QP8.Enums.ArticleFieldSearchType.Text:this._fieldSearch=new Quantumart.QP8.BackendArticleSearchBlock.TextFieldSearch(this._contentContainerElement,this._parentEntityId,this._fieldID,this._contentID,this._fieldColumn,this._fieldName,this._fieldGroup,this._referenceFieldId);break;case Quantumart.QP8.Enums.ArticleFieldSearchType.TimeRange:this._fieldSearch=new Quantumart.QP8.BackendArticleSearchBlock.DateOrTimeRangeFieldSearch(this._contentContainerElement,this._parentEntityId,this._fieldID,this._contentID,this._fieldColumn,this._fieldName,this._fieldGroup,this._referenceFieldId,Quantumart.QP8.Enums.ArticleFieldSearchType.TimeRange);break;case Quantumart.QP8.Enums.ArticleFieldSearchType.Classifier:this._fieldSearch=new Quantumart.QP8.BackendArticleSearchBlock.ClassifierFieldSearch(this._contentContainerElement,this._parentEntityId,this._fieldID,this._contentID,this._fieldColumn,this._fieldName,this._fieldGroup,this._referenceFieldId,Quantumart.QP8.Enums.ArticleFieldSearchType.Classifier);break;case Quantumart.QP8.Enums.ArticleFieldSearchType.StringEnum:this._fieldSearch=new Quantumart.QP8.BackendArticleSearchBlock.StringEnumFieldSearch(this._contentContainerElement,this._parentEntityId,this._fieldID,this._contentID,this._fieldColumn,this._fieldName,this._fieldGroup,this._referenceFieldId);break;default:this._fieldSearch=new Quantumart.QP8.BackendArticleSearchBlock.FieldSearchBase(this._contentContainerElement,this._parentEntityId,this._fieldID,this._contentID,this._fieldColumn,this._fieldName,this._fieldGroup,this._referenceFieldId)}},_getWindowSize:function(){switch(this._fieldSearchType){case Quantumart.QP8.Enums.ArticleFieldSearchType.Identifier:return{w:365,h:150};case Quantumart.QP8.Enums.ArticleFieldSearchType.Text:case Quantumart.QP8.Enums.ArticleFieldSearchType.StringEnum:return{w:410,h:130};case Quantumart.QP8.Enums.ArticleFieldSearchType.Boolean:return{w:350,h:100};case Quantumart.QP8.Enums.ArticleFieldSearchType.DateRange:case Quantumart.QP8.Enums.ArticleFieldSearchType.NumericRange:case Quantumart.QP8.Enums.ArticleFieldSearchType.TimeRange:return{w:350,h:200};case Quantumart.QP8.Enums.ArticleFieldSearchType.O2MRelation:case Quantumart.QP8.Enums.ArticleFieldSearchType.M2MRelation:case Quantumart.QP8.Enums.ArticleFieldSearchType.M2ORelation:return{w:511,h:250};case Quantumart.QP8.Enums.ArticleFieldSearchType.Classifier:return{w:400,h:90};default:return{w:350,h:125}}},_onCloseButtonClick:function(){this.notify(EVENT_TYPE_CONRETE_FIELD_SEARCH_CONTAINER_CLOSE,{fieldID:this._fieldID})},_onCloseWndClick:function(){this.$filterDetailsSpanElement.html(": "+this._fieldSearch.get_filterDetails());this._savedWindowState=this._fieldSearch.get_blockState();this._restoreWindowStateOnClosing=!1;this._popupWindowComponent.close()},_onCloseAndApplyWndClick:function(){this._onCloseWndClick();jQuery(this._containerElement).closest("form").trigger("submit")},_onFilterFormSubmitted:function(n){return n.preventDefault(),jQuery(this._closeAndApplyButton).trigger("click"),!1},_onContentOpenWindowClick:function(){this._popupWindowComponent?(this._popupWindowComponent.open(),this._fieldSearch.onOpen()):(this._createFieldSearchComponent(!0),this._fieldSearch.initialize());this._savedWindowState=this._fieldSearch.get_blockState();this._restoreWindowStateOnClosing=!0},_onPopupWindowClose:function(){this._restoreWindowStateOnClosing&&this._fieldSearch.restore_blockState(this._savedWindowState.data,!0)},dispose:function(){Quantumart.QP8.BackendArticleSearchBlock.FieldSearchContainer.callBaseMethod(this,"dispose");this.$filterDetailsSpanElement=null;this._fieldSearch&&this._fieldSearch.dispose();this._fieldSearch=null;jQuery(this._closeButtonElement).unbind("click");jQuery(this._contentWindowOpenLinkElement).unbind("click");this._popupWindowComponent&&(jQuery(this._popupWindowComponent.element).unbind("close"),jQuery(".closeFilter",this._popupWindowComponent.element).unbind("click"),jQuery(".closeAndApplyFilter",this._popupWindowComponent.element).unbind("click"),jQuery("form",this._popupWindowComponent.element).unbind("submit"),$c.destroyPopupWindow(this._popupWindowComponent),this._popupWindowComponent=null);this._contentContainerElement=null;this._closeButtonElement=null;this._closeAndApplyButton=null;this._containerElement=null;this._contentWindowOpenLinkElement=null;this._onCloseButtonClickHandler=null;this._onContentOpenWindowClickHandler=null;this._onCloseWndClickHandler=null}};Quantumart.QP8.BackendArticleSearchBlock.FieldSearchContainer.registerClass("Quantumart.QP8.BackendArticleSearchBlock.FieldSearchContainer",Quantumart.QP8.Observable);