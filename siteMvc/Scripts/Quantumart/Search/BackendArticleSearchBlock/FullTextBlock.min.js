Quantumart.QP8.BackendArticleSearchBlock.FullTextBlock=function(n,t){this._fullTextBlockElement=n;this._parentEntityId=t;this._elementIdPrefix=Quantumart.QP8.BackendSearchBlockBase.generateElementPrefix()};Quantumart.QP8.BackendArticleSearchBlock.FullTextBlock.prototype={_fullTextBlockElement:null,_textFieldsComboElement:null,_queryTextBoxElement:null,_parentEntityId:0,_elementIdPrefix:"",initialize:function(){var t,n;$q.getJsonFromUrl("GET",CONTROLLER_URL_ARTICLE_SEARCH_BLOCK+"FullTextBlock",{parentEntityId:this._parentEntityId,elementIdPrefix:this._elementIdPrefix},!1,!1,function(n){n.success?t=n.view:window.alert(n.message)},function(n){t=null;$q.processGenericAjaxError(n)});$q.isNullOrWhiteSpace(t)||(n=jQuery(this._fullTextBlockElement),n.html(t),this._textFieldsComboElement=n.find("#"+this._elementIdPrefix+"_TextFieldsCombo").get(0),jQuery(this._textFieldsComboElement).bind("change",jQuery.proxy(this.onFieldChanged,this)),this._queryTextBoxElement=n.find("#"+this._elementIdPrefix+"_QueryTextBox").get(0),n=null)},get_searchQuery:function(){var n=this._get_searchData();return n?Quantumart.QP8.BackendArticleSearchBlock.createFieldSearchQuery(Quantumart.QP8.Enums.ArticleFieldSearchType.FullText,n.fieldID,n.fieldColumn,n.contentID,n.referenceFieldID,n.text):null},get_blockState:function(){var n=this._get_searchData(),t;return n?(t={},n.fieldID&&(t.fieldID=n.fieldID),n.text&&(t.text=n.text),jQuery.isEmptyObject(t)?null:t):null},restore_blockState:function(n){if(n){jQuery(this._queryTextBoxElement).prop("value",n.text);var t=null;t=n.fieldID?jQuery("option[data-field_id='"+n.fieldID+"']",this._textFieldsComboElement):jQuery("option[data-field_id=]",this._textFieldsComboElement);t.prop("selected",!0)}},_get_searchData:function(){var n;if(this._textFieldsComboElement){if(n=jQuery(this._textFieldsComboElement).find("option:selected"),n){var t=n.val(),i=n.data("field_id"),r=n.data("content_id"),u=n.attr("field_column"),f=n.data("reference_field_id");return{fieldID:i,contentID:r,referenceFieldID:f,fieldColumn:u,fieldValue:t,text:jQuery(this._queryTextBoxElement).val()}}return null}return null},clear:function(){if(this._textFieldsComboElement){var n=jQuery(this._textFieldsComboElement).find("option[data-field_is_title='True']");n.length||(n=jQuery(this._textFieldsComboElement).find("option[value='']"))}n.prop("selected",!0);this._queryTextBoxElement&&jQuery(this._queryTextBoxElement).val("")},onFieldChanged:function(){jQuery(this._queryTextBoxElement).val()&&jQuery(this._fullTextBlockElement).closest("form").trigger("submit")},dispose:function(){jQuery(this._textFieldsComboElement).unbind("change");this._fullTextBlockElement=null;this._queryTextBoxElement=null;this._textFieldsComboElement=null}};Quantumart.QP8.BackendArticleSearchBlock.FullTextBlock.registerClass("Quantumart.QP8.BackendArticleSearchBlock.FullTextBlock",null,Sys.IDisposable);