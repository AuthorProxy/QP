var EVENT_TYPE_VIEW_TOOLBAR_VIEWS_DROPDOWN_SELECTED_INDEX_CHANGING="OnViewToolbarViewsDropDownListSelectedIndexChanging",EVENT_TYPE_VIEW_TOOLBAR_VIEWS_DROPDOWN_SELECTED_INDEX_CHANGED="OnViewToolbarViewsDropDownListSelectedIndexChanged",EVENT_TYPE_VIEW_TOOLBAR_PREVIEW_BUTTON_CLICKING="OnViewToolbarPreviewButtonClicking",EVENT_TYPE_VIEW_TOOLBAR_PREVIEW_BUTTON_CLICKED="OnViewToolbarPreviewButtonClicked",EVENT_TYPE_VIEW_TOOLBAR_SEARCH_BUTTON_CLICKING="OnViewToolbarSearchButtonClicking",EVENT_TYPE_VIEW_TOOLBAR_SEARCH_BUTTON_CLICKED="OnViewToolbarSearchButtonClicked",EVENT_TYPE_VIEW_TOOLBAR_CONTEXT_BUTTON_CLICKING="OnViewToolbarContextButtonClicking",EVENT_TYPE_VIEW_TOOLBAR_CONTEXT_BUTTON_CLICKED="OnViewToolbarContextButtonClicked";Quantumart.QP8.BackendViewToolbar=function(n,t,i){Quantumart.QP8.BackendViewToolbar.initializeBase(this,[n,i]);this._actionCode=t;$q.isObject(i)&&i.viewTypeCode&&(this._viewTypeCode=i.viewTypeCode)};Quantumart.QP8.BackendViewToolbar.prototype={_actionCode:"",_parentEntityId:0,_viewTypeCode:"",get_actionCode:function(){return this._actionCode},set_actionCode:function(n){this._actionCode=n},get_parentEntityId:function(){return this._parentEntityId},set_parentEntityId:function(n){this._parentEntityId=n},VIEWS_DROPDOWN_CODE:"views",PREVIEW_BUTTON_CODE:"preview",SEARCH_BUTTON_CODE:"search",CONTEXT_BUTTON_CODE:"context",_getCurrentAction:function(){return $a.getBackendActionByCode(this._actionCode)},addToolbarItemsToToolbar:function(n){var i=this._getCurrentAction(),t=this._getToolbarItemCollectionFromAction(i);Quantumart.QP8.BackendViewToolbar.callBaseMethod(this,"addToolbarItemsToToolbar",[t,n]);$q.clearArray(t);return},getSelectedViewTypeCode:function(){var n="",t=this.getToolbarItem(this.VIEWS_DROPDOWN_CODE);return t&&(n=jQuery("li.selected",t).attr("code")),n},_getToolbarItemCollectionFromAction:function(n){var i=this,t=[],r,f,e;$o.checkEntityForVariations(n.EntityType.Code,i.get_parentEntityId())&&(r={Type:TOOLBAR_ITEM_TYPE_BUTTON,Value:this.CONTEXT_BUTTON_CODE,Text:"",Tooltip:$l.Toolbar.contextButtonTooltip,ItemsAffected:1,Icon:"context.png",AlwaysEnabled:!0,CheckOnClick:!0,Checked:!1,TooltipChecked:$l.Toolbar.contextButtonTooltipChecked,IconChecked:null},Array.add(t,r));var o=n.DefaultViewType?n.DefaultViewType.Code:"",s=this._viewTypeCode?this._viewTypeCode:o,u={Type:TOOLBAR_ITEM_TYPE_DROPDOWN,Value:this.VIEWS_DROPDOWN_CODE,Tooltip:$l.Toolbar.viewsDropDownTooltip,ShowButtonText:!1,ArrowTooltip:$l.Toolbar.viewsDropDownArrowTooltip,ItemsAffected:1,AlwaysEnabled:!0,SelectedSubItemValue:s,Items:[]};return $q.isNullOrEmpty(n.Views)||jQuery.each(n.Views,function(t,r){var o=Quantumart.QP8.BackendEntityType.getParentEntityTypeCodeByCode(n.EntityType.Code),f=r.ViewType,e;(f.Code!=VIEW_TYPE_CODE_TREE||$o.checkEntityForPresenceSelfRelations(o,i.get_parentEntityId()))&&(e={Value:f.Code,Text:f.Name,Tooltip:f.Name,Icon:f.Icon},Array.add(u.Items,e))}),Array.add(t,u),n.AllowPreview&&(f={Type:TOOLBAR_ITEM_TYPE_BUTTON,Value:this.PREVIEW_BUTTON_CODE,Text:"",Tooltip:$l.Toolbar.previewButtonTooltip,ItemsAffected:1,Icon:"show_preview_pane.gif",AlwaysEnabled:!0,CheckOnClick:!0,Checked:!1,TooltipChecked:$l.Toolbar.previewButtonTooltipChecked,IconChecked:"hide_preview_pane.gif"},Array.add(t,f)),n.AllowSearch&&(e={Type:TOOLBAR_ITEM_TYPE_BUTTON,Value:this.SEARCH_BUTTON_CODE,Text:"",Tooltip:$l.Toolbar.searchButtonTooltip,ItemsAffected:1,Icon:"search.gif",AlwaysEnabled:!0,CheckOnClick:!0,Checked:!1,TooltipChecked:$l.Toolbar.searchButtonTooltipChecked,IconChecked:null},Array.add(t,e)),t},notifyToolbarButtonClicking:function(n){var i=n.get_value(),t=Quantumart.QP8.BackendViewToolbarButtonEventArgs.getViewToolbarButtonEventArgsFromToolbarButtonEventArgs(n);i==this.PREVIEW_BUTTON_CODE?this.notify(EVENT_TYPE_VIEW_TOOLBAR_PREVIEW_BUTTON_CLICKING,t):i==this.SEARCH_BUTTON_CODE?this.notify(EVENT_TYPE_VIEW_TOOLBAR_SEARCH_BUTTON_CLICKING,t):i==this.CONTEXT_BUTTON_CODE&&this.notify(EVENT_TYPE_VIEW_TOOLBAR_CONTEXT_BUTTON_CLICKING,t);t=null},notifyToolbarButtonClicked:function(n){var i=n.get_value(),t=Quantumart.QP8.BackendViewToolbarButtonEventArgs.getViewToolbarButtonEventArgsFromToolbarButtonEventArgs(n);i==this.PREVIEW_BUTTON_CODE?this.notify(EVENT_TYPE_VIEW_TOOLBAR_PREVIEW_BUTTON_CLICKED,t):i==this.SEARCH_BUTTON_CODE?this.notify(EVENT_TYPE_VIEW_TOOLBAR_SEARCH_BUTTON_CLICKED,t):i==this.CONTEXT_BUTTON_CODE&&this.notify(EVENT_TYPE_VIEW_TOOLBAR_CONTEXT_BUTTON_CLICKED,t);t=null},notifyDropDownSelectedIndexChanging:function(n){var r=n.get_itemValue(),u=n.get_newSubItemValue(),t=Quantumart.QP8.BackendViewToolbarButtonEventArgs.getViewToolbarDropDownListEventArgsFromToolbarDropDownListEventArgs(n),i=$a.getActionViewByViewTypeCode(this._getCurrentAction(),u);i&&(t.set_controllerActionUrl(i.ControllerActionUrl),t.set_preventDefaultBehavior(i.PreventDefaultBehavior),t.set_code(n.get_newSubItemValue()),i=null);r==this.VIEWS_DROPDOWN_CODE&&this.notify(EVENT_TYPE_VIEW_TOOLBAR_VIEWS_DROPDOWN_SELECTED_INDEX_CHANGING,t);t=null},notifyDropDownSelectedIndexChanged:function(n){var u=n.get_itemValue(),r=n.get_newSubItemValue(),t=Quantumart.QP8.BackendViewToolbarButtonEventArgs.getViewToolbarDropDownListEventArgsFromToolbarDropDownListEventArgs(n),i=$a.getActionViewByViewTypeCode(this._getCurrentAction(),r);i&&(t.set_controllerActionUrl(i.ControllerActionUrl),t.set_preventDefaultBehavior(i.PreventDefaultBehavior),t.set_code(r),i=null);u==this.VIEWS_DROPDOWN_CODE&&this.notify(EVENT_TYPE_VIEW_TOOLBAR_VIEWS_DROPDOWN_SELECTED_INDEX_CHANGED,t);t=null},dispose:function(){Quantumart.QP8.BackendViewToolbar.callBaseMethod(this,"dispose");$q.collectGarbageInIE()}};Quantumart.QP8.BackendViewToolbar.registerClass("Quantumart.QP8.BackendViewToolbar",Quantumart.QP8.BackendToolbar);Quantumart.QP8.BackendViewToolbarButtonEventArgs=function(){Quantumart.QP8.BackendViewToolbarButtonEventArgs.initializeBase(this)};Quantumart.QP8.BackendViewToolbarButtonEventArgs.getViewToolbarButtonEventArgsFromToolbarButtonEventArgs=function(n){var t=new Quantumart.QP8.BackendViewToolbarButtonEventArgs;return t.set_value(n.get_value()),t.set_checkOnClick(n.get_checkOnClick()),t.set_checked(n.get_checked()),t};Quantumart.QP8.BackendViewToolbarButtonEventArgs.registerClass("Quantumart.QP8.BackendViewToolbarButtonEventArgs",Quantumart.QP8.BackendToolbarButtonEventArgs);Quantumart.QP8.BackendViewToolbarDropDownListEventArgs=function(){Quantumart.QP8.BackendViewToolbarDropDownListEventArgs.initializeBase(this)};Quantumart.QP8.BackendViewToolbarDropDownListEventArgs.prototype={_controllerActionUrl:"",_preventDefaultBehavior:!1,_code:"",get_controllerActionUrl:function(){return this._controllerActionUrl},set_controllerActionUrl:function(n){this._controllerActionUrl=n},get_preventDefaultBehavior:function(){return this._preventDefaultBehavior},set_preventDefaultBehavior:function(n){this._preventDefaultBehavior=n},get_code:function(){return this._code},set_code:function(n){this._code=n}};Quantumart.QP8.BackendViewToolbarButtonEventArgs.getViewToolbarDropDownListEventArgsFromToolbarDropDownListEventArgs=function(n){var t=new Quantumart.QP8.BackendViewToolbarDropDownListEventArgs;return t.set_itemValue(n.get_itemValue()),t.set_oldSubItemValue(n.get_oldSubItemValue()),t.set_newSubItemValue(n.get_newSubItemValue()),t};Quantumart.QP8.BackendViewToolbarDropDownListEventArgs.registerClass("Quantumart.QP8.BackendViewToolbarDropDownListEventArgs",Quantumart.QP8.BackendToolbarDropDownListEventArgs);