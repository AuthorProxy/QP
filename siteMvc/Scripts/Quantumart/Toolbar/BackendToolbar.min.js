var EVENT_TYPE_TOOLBAR_BUTTON_CLICKING="OnToolbarButtonClicking",EVENT_TYPE_TOOLBAR_BUTTON_CLICKED="OnToolbarButtonClicked",EVENT_TYPE_TOOLBAR_DROPDOWN_SELECTED_INDEX_CHANGING="OnToolbarDropDownListSelectedIndexChanging",EVENT_TYPE_TOOLBAR_DROPDOWN_SELECTED_INDEX_CHANGED="OnToolbarDropDownListSelectedIndexChanged",TOOLBAR_ITEM_TYPE_BUTTON="button",TOOLBAR_ITEM_TYPE_DROPDOWN="drop_down";Quantumart.QP8.BackendToolbar=function(n,t){Quantumart.QP8.BackendToolbar.initializeBase(this);this._toolbarElementId=n;$q.isObject(t)&&t.toolbarContainerElementId&&(this._toolbarContainerElementId=t.toolbarContainerElementId);this._onToolbarButtonUnhoveringHandler=jQuery.proxy(this._onToolbarButtonUnhovering,this);this._onToolbarButtonClickingHandler=jQuery.proxy(this._onToolbarButtonClicking,this);this._onToolbarButtonClickedHandler=jQuery.proxy(this._onToolbarButtonClicked,this);this._onToolbarDropDownArrowUnhoveringHandler=jQuery.proxy(this._onToolbarDropDownArrowUnhovering,this);this._onToolbarDropDownArrowClickingHandler=jQuery.proxy(this._onToolbarDropDownArrowClicking,this);this._onToolbarDropDownArrowClickedHandler=jQuery.proxy(this._onToolbarDropDownArrowClicked,this);this._onToolbarDropDownButtonUnhoveringHandler=jQuery.proxy(this._onToolbarDropDownButtonUnhovering,this);this._onToolbarDropDownButtonClickingHandler=jQuery.proxy(this._onToolbarDropDownButtonClicking,this);this._onToolbarDropDownButtonClickedHandler=jQuery.proxy(this._onToolbarDropDownButtonClicked,this);this._onToolbarDropDownListItemClickingHandler=jQuery.proxy(this._onToolbarDropDownListItemClicking,this);this._onToolbarDropDownListItemClickedHandler=jQuery.proxy(this._onToolbarDropDownListItemClicked,this)};Quantumart.QP8.BackendToolbar.prototype={_toolbarElementId:"",_toolbarElement:null,_toolbarItemListElement:null,_toolbarContainerElementId:"",ITEM_DISABLED_CLASS_NAME:"disabled",ITEM_CHECKED_CLASS_NAME:"checked",ITEM_BUSY_CLASS_NAME:"busy",DROPDOWN_LIST_ITEM_SELECTED_CLASS_NAME:"selected",BUTTON_CLICKABLE_SELECTORS:".toolbar > UL > LI.button",DROPDOWN_ARROW_CLICKABLE_SELECTORS:".toolbar > UL > LI.dropDown SPAN.arrow",DROPDOWN_BUTTON_CLICKABLE_SELECTORS:".toolbar > UL > LI.dropDown SPAN.button",DROPDOWN_LIST_ITEM_CLICKABLE_SELECTORS:".toolbar > UL > LI.dropDown .list UL LI.item",_onToolbarButtonUnhoveringHandler:null,_onToolbarButtonClickingHandler:null,_onToolbarButtonClickedHandler:null,_onToolbarDropDownArrowUnhoveringHandler:null,_onToolbarDropDownArrowClickingHandler:null,_onToolbarDropDownArrowClickedHandler:null,_onToolbarDropDownButtonUnhoveringHandler:null,_onToolbarDropDownButtonClickingHandler:null,_onToolbarDropDownButtonClickedHandler:null,_onToolbarDropDownListItemClickingHandler:null,_onToolbarDropDownListItemClickedHandler:null,_isBindToExternal:!1,get_toolbarElementId:function(){return this._toolbarElementId},set_toolbarElementId:function(n){this._toolbarElementId=n},get_toolbarElement:function(){return this._toolbarElement},get_toolbarContainerElementId:function(){return this._toolbarContainerElementId},set_toolbarContainerElementId:function(n){this._toolbarContainerElementId=n},get_isBindToExternal:function(){return this._isBindToExternal},set_isBindToExternal:function(n){this._isBindToExternal=n},initialize:function(){var n=jQuery("#"+this._toolbarElementId),t=null,i=!$q.isNullOrEmpty(n);i||(n=jQuery("<div />",{id:this._toolbarElementId,"class":"toolbar",css:{display:"none"}}));t=n.find("UL:first");$q.isNullOrEmpty(t)&&(t=jQuery("<ul />"));i||(n.append(t),$q.isNullOrWhiteSpace(this._toolbarContainerElementId)?jQuery("BODY:first").append(n):jQuery("#"+this._toolbarContainerElementId).append(n));this._toolbarElement=n.get(0);this._toolbarItemListElement=t.get(0);i||this._attachToolbarEventHandlers()},showToolbar:function(n){var t=jQuery(this._toolbarElement);t.show();$q.callFunction(n)},hideToolbar:function(n){var t=jQuery(this._toolbarElement);t.hide();$q.callFunction(n)},markToolbarAsBusy:function(){var n=jQuery(this._toolbarItemListElement);n.addClass(this.ITEM_BUSY_CLASS_NAME)},unmarkToolbarAsBusy:function(){var n=jQuery(this._toolbarItemListElement);n.removeClass(this.ITEM_BUSY_CLASS_NAME)},isToolbarBusy:function(){var n=jQuery(this._toolbarItemListElement);return n.hasClass(this.ITEM_BUSY_CLASS_NAME)},getToolbarItems:function(){return jQuery("> LI.item",this._toolbarItemListElement)},getToolbarItem:function(n){var t=null;return $q.isObject(n)?$q.toJQuery(n):$q.isString(n)?(t=jQuery("LI[code='"+n+"']",this._toolbarItemListElement),t.length==0&&(t=null),t):void 0},_getToolbarItemByDropDownListItem:function(n){var i=this._getToolbarDropDownListItem(n),t=null;return $q.isNullOrEmpty(i)||(t=i.parent().parent().parent(),t.length==0&&(t=null)),t},getToolbarItemValue:function(n){var t=this.getToolbarItem(n),i="";if($q.isNullOrEmpty(t)){alert($l.Toolbar.itemNotSpecified);return}return i=t.attr("code"),t=null,i},getToolbarItemText:function(n){var t=this.getToolbarItem(n),i="";return $q.isNullOrEmpty(t)||(i=jQuery("SPAN.text",t).text()),t=null,i},_getToolbarItemsHtml:function(n){for(var t,u=n.length,i=new $.telerik.stringBuilder,r=0;r<u;r++)t=n[r],t.Type==TOOLBAR_ITEM_TYPE_BUTTON?this._getToolbarButtonHtml(i,t):t.Type==TOOLBAR_ITEM_TYPE_DROPDOWN&&this._getToolbarDropDownHtml(i,t);return i.string()},addToolbarItemsToToolbar:function(n,t){$q.isNull(n)||(jQuery(this._toolbarItemListElement).html(this._getToolbarItemsHtml(n)),this._extendToolbarItemElements(n),this.refreshToolbarItems(t))},tuneToolbarItems:function(n){for(var i,r,u=n.length,t=0;t<u;t++)i=n[t],r=this.getToolbarItem(i.Code),$q.isNullOrEmpty(r)||this.setVisibleState(r,i.Visible)},removeToolbarItemsFromToolbar:function(){var n=jQuery(this._toolbarItemListElement);n.empty()},refreshToolbarItems:function(n){n==null&&(n=0);var i=this,t=this.getToolbarItems();t.each(function(t,r){var u=jQuery(r),f=$q.toInt(u.data("items_affected"),0),e=n==f||f==MAX_ITEMS_AFFECTED_NUMBER&&n>=1;i.setEnableState(u,e)});t=null},_getToolbarDropDownList:function(n){var t=this.getToolbarItem(n),i;return $q.isNullOrEmpty(t)||(i=t.find(".list:first"),i.length==0&&(t=null)),i},_updateDropDownListButton:function(n,t){var i=this.getToolbarItem(n),r=this._getToolbarDropDownListItem(t);if(!$q.isNullOrEmpty(i)&&!$q.isNullOrEmpty(r)){var u=i.find("SPAN.button > SPAN.icon"),f=i.find("SPAN.button > SPAN.text"),o=r.data("icon"),e=this._getToolbarDropDownListItemText(r),s=i.data("show_button_text");r.siblings().removeClass(this.DROPDOWN_LIST_ITEM_SELECTED_CLASS_NAME).end().addClass(this.DROPDOWN_LIST_ITEM_SELECTED_CLASS_NAME);i.data("selected_sub_item_value",this._getToolbarDropDownListItemValue(r));u.css("backgroundImage",String.format("url('{0}')",THEME_IMAGE_FOLDER_URL_SMALL_ICONS+o));!$q.isNullOrWhiteSpace(e)&&s&&f.text(e);u=null;f=null}},_getToolbarDropDownListItem:function(n){var t=null;return $q.isObject(n)&&(t=$q.toJQuery(n),t.length==0&&(t=null)),t},_getToolbarDropDownListNextItem:function(n){var i=this._getToolbarDropDownListItem(n),t=null;return $q.isNullOrEmpty(i)||(t=i.next(),$q.isNullOrEmpty(t)&&(t=i.siblings().first()),t.length==0&&(t=null)),t},_getToolbarDropDownListItemByValue:function(n,t){var r=this.getToolbarItem(n),i=null,u;return $q.isNullOrEmpty(r)||(u=this._getToolbarDropDownList(r),$q.isNullOrEmpty(u)||(i=r.find("LI[code='"+t+"']"),i.length==0&&(i=null))),i},_getToolbarDropDownListItemValue:function(n){var t=this._getToolbarDropDownListItem(n),i="";return $q.isNullOrEmpty(t)||(i=t.attr("code")),i},_getToolbarDropDownListItemText:function(n){var t=this._getToolbarDropDownListItem(n),i="";return $q.isNullOrEmpty(t)||(i=t.find("SPAN.text").text()),i},_toggleDropDownList:function(n){var t=this.getToolbarItem(n);$q.isNullOrEmpty(t)||(this._isDropDownListVisible(t)?this._hideDropDownList(t):this._showDropDownList(t))},_showDropDownList:function(n){var i=this.getToolbarItem(n),t;if(!$q.isNullOrEmpty(i)){if(t=this._getToolbarDropDownList(i),!$q.isNullOrEmpty(t)){var u=jQuery(window).width(),o=jQuery(window).height(),f=t.outerWidth(),s=t.outerHeight(),e=i.offset().top+i.height()+i.borderTopWidth()+i.borderBottomWidth()-1,r=i.offset().left;r+f>u&&(r=u-f);t.css("top",e+"px");t.css("left",r+"px");t.show()}t=null}},_hideDropDownList:function(n){var i=this.getToolbarItem(n),t;$q.isNullOrEmpty(i)||(t=this._getToolbarDropDownList(i),$q.isNullOrEmpty(t)||t.hide(),t=null,this._cancelClickedStyleToToolbarDropDown(i))},_isDropDownListVisible:function(n){var i=this.getToolbarItem(n),r=!1,t;return $q.isNullOrEmpty(i)||(t=this._getToolbarDropDownList(i),$q.isNullOrEmpty(t)||(r=t.is(":visible"))),r},_getToolbarButtonHtml:function(n,t){var i=t.Icon.left(7).toLowerCase()!=="http://"?THEME_IMAGE_FOLDER_URL_SMALL_ICONS+t.Icon:t.Icon;n.cat('<li code="'+$q.htmlEncode(t.Value)+'" class="item button">\n').cat('  <a href="javascript:void(0);" class="link'+(t.Checked?" "+this.ITEM_CHECKED_CLASS_NAME:"")+'">').cat('<span class="outerWrapper">').cat('<span class="innerWrapper">').catIf('<span class="icon" style="background-image: url(\''+i+"')\""+($q.isNullOrWhiteSpace(t.Tooltip)?"":' title="'+$q.htmlEncode(t.Tooltip)+'"')+'><img src="'+COMMON_IMAGE_FOLDER_URL_ROOT+'/0.gif" /><\/span>',!$q.isNullOrWhiteSpace(t.Icon)).catIf('<span class="text'+($q.isNullOrWhiteSpace(t.Icon)?" textOnly":"")+'">'+$q.htmlEncode(t.Text)+"<\/span>",!$q.isNullOrWhiteSpace(t.Text)).cat("<\/span>").cat("<\/span>").cat("<\/a>\n").cat("<\/li>\n")},_getToolbarDropDownHtml:function(n,t){var f=this,u=t.SelectedSubItemValue,r=t.Items,i;r.length>1&&(i=jQuery.grep(r,function(n){return n.Value==u})[0],i||(i=r[0]),n.cat('<li code="'+$q.htmlEncode(t.Value)+'" class="item dropDown">\n').cat('  <a href="javascript:void(0);" class="link">').cat('<span class="outerWrapper">').cat('<span class="innerWrapper">').cat('<span class="button"'+($q.isNullOrWhiteSpace(t.Tooltip)?"":' title="'+$q.htmlEncode(t.Tooltip)+'"')+">").catIf('<span class="icon" style="background-image: url(\''+THEME_IMAGE_FOLDER_URL_SMALL_ICONS+i.Icon+'\')"><img src="'+COMMON_IMAGE_FOLDER_URL_ROOT+'/0.gif" /><\/span>',!$q.isNullOrWhiteSpace(i.Icon)).catIf('<span class="text'+($q.isNullOrWhiteSpace(i.Icon)?" textOnly":"")+'">'+$q.htmlEncode(i.Text)+"<\/span>",!$q.isNullOrWhiteSpace(i.Text)&&t.ShowButtonText).cat("<\/span>").cat('<span class="arrow"'+($q.isNullOrWhiteSpace(t.ArrowTooltip)?"":' title="'+$q.htmlEncode(t.ArrowTooltip)+'"')+'><img src="'+COMMON_IMAGE_FOLDER_URL_ROOT+'/0.gif" /><\/span>').cat("<\/span>").cat("<\/span>").cat("<\/a>\n"),n.cat('<div class="list">\n'),n.cat("<ul>\n"),jQuery.each(r,function(t,i){f._getToolbarDropDownItemHtml(n,i,u)}),n.cat("<\/ul>\n"),n.cat("<\/div>\n"),n.cat("<\/li>\n"))},_getToolbarDropDownItemHtml:function(n,t,i){var r=t.Value==i;n.cat('<li code="'+$q.htmlEncode(t.Value)+'" class="item'+(r?" "+this.DROPDOWN_LIST_ITEM_SELECTED_CLASS_NAME:"")+'">\n').cat('  <div class="outerWrapper">\n').cat('      <div class="innerWrapper">\n').cat('          <span class="icon"').catIf(" style=\"background-image: url('"+THEME_IMAGE_FOLDER_URL_SMALL_ICONS+t.Icon+"')\"",!$q.isNullOrWhiteSpace(t.Icon)).cat(">").cat('<img src="'+COMMON_IMAGE_FOLDER_URL_ROOT+'0.gif" width="16px" height="16px" />').cat("<\/span>\n").cat('          <span class="text">'+$q.htmlEncode(t.Text)+"<\/span>\n").cat("      <\/div>\n").cat("  <\/div>\n").cat("<\/li>\n")},_getSeparatorHtml:function(n){n.cat('<li class="separator"><\/li>\n')},_extendToolbarItemElement:function(n,t){var i=this.getToolbarItem(n);$q.isNullOrEmpty(i)||(i.data("tooltip",t.Tooltip),i.data("items_affected",t.ItemsAffected),i.data("always_enabled",t.AlwaysEnabled),t.Type==TOOLBAR_ITEM_TYPE_BUTTON?(i.data("icon",t.Icon),i.data("check_on_click",t.CheckOnClick),i.data("icon_checked",t.IconChecked),i.data("tooltip_checked",t.TooltipChecked),this._extendToolbarDropDownListElements(i,t.Items)):t.Type==TOOLBAR_ITEM_TYPE_DROPDOWN&&(i.data("show_button_text",t.ShowButtonText),i.data("selected_sub_item_value",t.SelectedSubItemValue),this._extendToolbarDropDownListElements(i,t.Items)))},_extendToolbarItemElements:function(n){var t=this;jQuery.each(n,function(n,i){var r=t.getToolbarItem(i.Value);$q.isNullOrEmpty(r)||t._extendToolbarItemElement(r,i)})},_extendToolbarDropDownListItemElement:function(n,t){var i=this._getToolbarDropDownListItem(n);$q.isNullOrEmpty(i)||(i.data("tooltip",t.Tooltip),i.data("icon",t.Icon))},_extendToolbarDropDownListElements:function(n,t){if(!$q.isNullOrEmpty(t)){var i=this,r=this.getToolbarItem(n);$q.isNullOrEmpty(r)||jQuery.each(t,function(n,t){var u=i._getToolbarDropDownListItemByValue(r,t.Value);$q.isNullOrEmpty(u)||i._extendToolbarDropDownListItemElement(u,t)})}},_applyClickedStyleToToolbarButton:function(n){var i=this.getToolbarItem(n),t;$q.isNullOrEmpty(i)||i.data("check_on_click")||(t=jQuery(n).find("A:first"),t.addClass("clicked"),t=null)},_cancelClickedStyleToToolbarButton:function(n){var i=this.getToolbarItem(n),t;$q.isNullOrEmpty(i)||(t=i.find("A:first"),t.removeClass("clicked"),t=null)},_toggleCheckedStyleToToolbarButton:function(n){var t=this.getToolbarItem(n);if(!$q.isNullOrEmpty(t)&&t.data("check_on_click")){var r=t.find("A.link"),i=t.find("SPAN.icon"),u=t.data("icon_checked"),f=t.data("tooltip_checked");this.isToolbarButtonChecked(t)?(r.removeClass(this.ITEM_CHECKED_CLASS_NAME),$q.isNullOrWhiteSpace(u)||i.css("backgroundImage",String.format('url("{0}")',THEME_IMAGE_FOLDER_URL_SMALL_ICONS+t.data("icon"))),$q.isNullOrWhiteSpace(f)||i.attr("title",t.data("tooltip"))):(r.addClass(this.ITEM_CHECKED_CLASS_NAME),$q.isNullOrWhiteSpace(u)||i.css("backgroundImage",String.format('url("{0}")',THEME_IMAGE_FOLDER_URL_SMALL_ICONS+u)),$q.isNullOrWhiteSpace(f)||i.attr("title",f));r=null;i=null}},_applyClickedStyleToToolbarDropDownArrow:function(n){var i=this.getToolbarItem(n),t;$q.isNullOrEmpty(i)||(t=i.find("A:first"),t.addClass("arrowClicked"),t=null)},_applyClickedStyleToToolbarDropDownButton:function(n){var i=this.getToolbarItem(n),t;$q.isNullOrEmpty(i)||(t=i.find("A:first"),t.addClass("buttonClicked"),t=null)},_cancelClickedStyleToToolbarDropDown:function(n){var i=this.getToolbarItem(n),t;$q.isNullOrEmpty(i)||(t=i.find("A:first"),t.removeClass("arrowClicked").removeClass("buttonClicked"),t=null)},isToolbarItemEnabled:function(n){var t=this.getToolbarItem(n),i=!1;return $q.isNullOrEmpty(t)||(i=!t.hasClass(this.ITEM_DISABLED_CLASS_NAME)),i},isToolbarButtonChecked:function(n){var i=this.getToolbarItem(n),r=!1,t;return $q.isNullOrEmpty(i)||(t=i.find("A.link"),$q.isNullOrEmpty(t)||(r=t.hasClass(this.ITEM_CHECKED_CLASS_NAME))),r},setVisibleState:function(n,t){var i=this.getToolbarItem(n);$q.isNullOrEmpty(i)||(t?i.show():i.hide())},setVisibleStateForAll:function(n){var t=this;this.getToolbarItems().each(function(i,r){t.setVisibleState(r,n)})},setEnableState:function(n,t){var i=this.getToolbarItem(n);$q.isNullOrEmpty(i)||(t?i.removeClass(this.ITEM_DISABLED_CLASS_NAME):i.data("always_enabled")||i.addClass(this.ITEM_DISABLED_CLASS_NAME))},setEnableStateForAll:function(n){var t=this;this.getToolbarItems().each(function(i,r){t.setEnableState(r,n)})},_attachToolbarEventHandlers:function(){var n=jQuery(this._toolbarElement);n.delegate(this.BUTTON_CLICKABLE_SELECTORS,"mouseout",this._onToolbarButtonUnhoveringHandler).delegate(this.BUTTON_CLICKABLE_SELECTORS,"mousedown",this._onToolbarButtonClickingHandler).delegate(this.BUTTON_CLICKABLE_SELECTORS,"mouseup",this._onToolbarButtonClickedHandler).delegate(this.DROPDOWN_ARROW_CLICKABLE_SELECTORS,"mouseout",this._onToolbarDropDownArrowUnhoveringHandler).delegate(this.DROPDOWN_ARROW_CLICKABLE_SELECTORS,"mousedown",this._onToolbarDropDownArrowClickingHandler).delegate(this.DROPDOWN_ARROW_CLICKABLE_SELECTORS,"mouseup",this._onToolbarDropDownArrowClickedHandler).delegate(this.DROPDOWN_BUTTON_CLICKABLE_SELECTORS,"mouseout",this._onToolbarDropDownButtonUnhoveringHandler).delegate(this.DROPDOWN_BUTTON_CLICKABLE_SELECTORS,"mouseup",this._onToolbarDropDownButtonClickingHandler).delegate(this.DROPDOWN_BUTTON_CLICKABLE_SELECTORS,"mousedown",this._onToolbarDropDownButtonClickedHandler).delegate(this.DROPDOWN_LIST_ITEM_CLICKABLE_SELECTORS,"mouseup",this._onToolbarDropDownListItemClickingHandler).delegate(this.DROPDOWN_LIST_ITEM_CLICKABLE_SELECTORS,"mousedown",this._onToolbarDropDownListItemClickedHandler)},_detachToolbarEventHandlers:function(){var n=jQuery(this._toolbarElement);n.undelegate(this.BUTTON_CLICKABLE_SELECTORS,"mouseout",this._onToolbarButtonUnhoveringHandler).undelegate(this.BUTTON_CLICKABLE_SELECTORS,"mousedown",this._onToolbarButtonClickingHandler).undelegate(this.BUTTON_CLICKABLE_SELECTORS,"mouseup",this._onToolbarButtonClickedHandler).undelegate(this.DROPDOWN_ARROW_CLICKABLE_SELECTORS,"mouseout",this._onToolbarDropDownArrowUnhoveringHandler).undelegate(this.DROPDOWN_ARROW_CLICKABLE_SELECTORS,"mousedown",this._onToolbarDropDownArrowClickingHandler).undelegate(this.DROPDOWN_ARROW_CLICKABLE_SELECTORS,"mouseup",this._onToolbarDropDownArrowClickedHandler).undelegate(this.DROPDOWN_BUTTON_CLICKABLE_SELECTORS,"mouseout",this._onToolbarDropDownButtonUnhoveringHandler).undelegate(this.DROPDOWN_BUTTON_CLICKABLE_SELECTORS,"mouseup",this._onToolbarDropDownButtonClickingHandler).undelegate(this.DROPDOWN_BUTTON_CLICKABLE_SELECTORS,"mousedown",this._onToolbarDropDownButtonClickedHandler).undelegate(this.DROPDOWN_LIST_ITEM_CLICKABLE_SELECTORS,"mouseup",this._onToolbarDropDownListItemClickingHandler).undelegate(this.DROPDOWN_LIST_ITEM_CLICKABLE_SELECTORS,"mousedown",this._onToolbarDropDownListItemClickedHandler)},notifyToolbarButtonClicking:function(n){this.notify(EVENT_TYPE_TOOLBAR_BUTTON_CLICKING,n)},notifyToolbarButtonClicked:function(n){this.notify(EVENT_TYPE_TOOLBAR_BUTTON_CLICKED,n)},notifyDropDownSelectedIndexChanged:function(n){this.notify(EVENT_TYPE_TOOLBAR_DROPDOWN_SELECTED_INDEX_CHANGED,n)},notifyDropDownSelectedIndexChanging:function(n){this.notify(EVENT_TYPE_TOOLBAR_DROPDOWN_SELECTED_INDEX_CHANGING,n)},_onToolbarButtonUnhovering:function(n){var t=jQuery(n.currentTarget);if(!this.isToolbarItemEnabled(t)||this.isToolbarBusy())return!1;this._cancelClickedStyleToToolbarButton(t)},_onToolbarButtonClicking:function(n){var t=jQuery(n.currentTarget);if(!this.isToolbarItemEnabled(t)||this.isToolbarBusy())return!1;this._applyClickedStyleToToolbarButton(t);var r=this.getToolbarItemValue(t),u=t.data("check_on_click"),f=this.isToolbarButtonChecked(t),i=new Quantumart.QP8.BackendToolbarButtonEventArgs;i.set_value(r);i.set_checkOnClick(u);i.set_checked(f);this.notifyToolbarButtonClicking(i);i=null},_onToolbarButtonClicked:function(n){var t=jQuery(n.currentTarget);if(!this.isToolbarItemEnabled(t)||this.isToolbarBusy())return!1;this._cancelClickedStyleToToolbarButton(t);this._toggleCheckedStyleToToolbarButton(t);var r=this.getToolbarItemValue(t),u=t.data("check_on_click"),f=this.isToolbarButtonChecked(t),i=new Quantumart.QP8.BackendToolbarButtonEventArgs;i.set_value(r);i.set_checkOnClick(u);i.set_checked(f);this.notifyToolbarButtonClicked(i);i=null},_onToolbarDropDownArrowUnhovering:function(n){var i=jQuery(n.currentTarget),t=i.parent().parent().parent().parent();if(!this.isToolbarItemEnabled(t)||this.isToolbarBusy())return!1;this._isDropDownListVisible(t)||this._cancelClickedStyleToToolbarDropDown(t)},_onToolbarDropDownArrowClicking:function(n){var i=jQuery(n.currentTarget),t=i.parent().parent().parent().parent();if(!this.isToolbarItemEnabled(t)||this.isToolbarBusy())return!1;this._applyClickedStyleToToolbarDropDownArrow(t)},_onToolbarDropDownArrowClicked:function(n){var i=jQuery(n.currentTarget),t=i.parent().parent().parent().parent();if(!this.isToolbarItemEnabled(t)||this.isToolbarBusy())return!1;this._toggleDropDownList(t)},_onToolbarDropDownButtonUnhovering:function(n){var i=jQuery(n.currentTarget),t=i.parent().parent().parent().parent();if(!this.isToolbarItemEnabled(t)||this.isToolbarBusy())return!1;this._isDropDownListVisible(t)||this._cancelClickedStyleToToolbarDropDown(t)},_onToolbarDropDownButtonClicking:function(n){var i=jQuery(n.currentTarget),t=i.parent().parent().parent().parent();if(!this.isToolbarItemEnabled(t)||this.isToolbarBusy())return!1;this._cancelClickedStyleToToolbarDropDown(t)},_onToolbarDropDownButtonClicked:function(n){var h=jQuery(n.currentTarget),i=h.parent().parent().parent().parent(),f,u,r,t;if(!this.isToolbarItemEnabled(i)||this.isToolbarBusy())return!1;if(f=i.data("selected_sub_item_value"),u=this._getToolbarDropDownListItemByValue(i,f),!$q.isNullOrEmpty(u)){if(r=this._getToolbarDropDownListNextItem(u),!$q.isNullOrEmpty(r)){var s=this.getToolbarItemValue(i),e=f,o=this._getToolbarDropDownListItemValue(r);e!=o?(t=new Quantumart.QP8.BackendToolbarDropDownListEventArgs,t.set_itemValue(s),t.set_oldSubItemValue(e),t.set_newSubItemValue(o),this.notifyDropDownSelectedIndexChanging(t),t=null,this._updateDropDownListButton(i,r),this._applyClickedStyleToToolbarDropDownButton(i),this._hideDropDownList(i),t=new Quantumart.QP8.BackendToolbarDropDownListEventArgs,t.set_itemValue(s),t.set_oldSubItemValue(e),t.set_newSubItemValue(o),this.notifyDropDownSelectedIndexChanged(t),t=null):(this._applyClickedStyleToToolbarDropDownButton(i),this._hideDropDownList(i))}r=null}u=null},_onToolbarDropDownListItemClicking:function(n){var r=jQuery(n.currentTarget),i=this._getToolbarItemByDropDownListItem(r),t;if(!$q.isNullOrEmpty(i)){if(!this.isToolbarItemEnabled(i)||this.isToolbarBusy())return!1;var e=this.getToolbarItemValue(i),u=i.data("selected_sub_item_value"),f=this._getToolbarDropDownListItemValue(r);u!=f&&(t=new Quantumart.QP8.BackendToolbarDropDownListEventArgs,t.set_itemValue(e),t.set_oldSubItemValue(u),t.set_newSubItemValue(f),this.notifyDropDownSelectedIndexChanging(t),t=null)}i=null},_onToolbarDropDownListItemClicked:function(n){var r=jQuery(n.currentTarget),t=this._getToolbarItemByDropDownListItem(r),i;if(!$q.isNullOrEmpty(t)){if(!this.isToolbarItemEnabled(t)||this.isToolbarBusy())return!1;var e=this.getToolbarItemValue(t),u=t.data("selected_sub_item_value"),f=this._getToolbarDropDownListItemValue(r);u!=f?(this._updateDropDownListButton(t,r),this._hideDropDownList(t),i=new Quantumart.QP8.BackendToolbarDropDownListEventArgs,i.set_itemValue(e),i.set_oldSubItemValue(u),i.set_newSubItemValue(f),this.notifyDropDownSelectedIndexChanged(i),i=null):this._hideDropDownList(t)}t=null},dispose:function(){var n,t;Quantumart.QP8.BackendToolbar.callBaseMethod(this,"dispose");this._detachToolbarEventHandlers();this._toolbarItemListElement&&(n=jQuery(this._toolbarItemListElement),n.empty().remove(),n=null,this._toolbarItemListElement=null);this._toolbarElement&&(t=jQuery(this._toolbarElement),t.empty().remove(),this._toolbarElement=null);this._onToolbarButtonUnhoveringHandler=null;this._onToolbarButtonClickingHandler=null;this._onToolbarButtonClickedHandler=null;this._onToolbarDropDownArrowUnhoveringHandler=null;this._onToolbarDropDownArrowClickingHandler=null;this._onToolbarDropDownArrowClickedHandler=null;this._onToolbarDropDownButtonUnhoveringHandler=null;this._onToolbarDropDownButtonClickingHandler=null;this._onToolbarDropDownButtonClickedHandler=null;this._onToolbarDropDownListItemClickingHandler=null;this._onToolbarDropDownListItemClickedHandler=null;$q.collectGarbageInIE()}};Quantumart.QP8.BackendToolbar.registerClass("Quantumart.QP8.BackendToolbar",Quantumart.QP8.Observable);Quantumart.QP8.BackendToolbarButtonEventArgs=function(){Quantumart.QP8.BackendToolbarButtonEventArgs.initializeBase(this)};Quantumart.QP8.BackendToolbarButtonEventArgs.prototype={_value:"",_checkOnClick:!1,_checked:!1,get_value:function(){return this._value},set_value:function(n){this._value=n},get_checkOnClick:function(){return this._checkOnClick},set_checkOnClick:function(n){this._checkOnClick=n},get_checked:function(){return this._checked},set_checked:function(n){this._checked=n}};Quantumart.QP8.BackendToolbarButtonEventArgs.registerClass("Quantumart.QP8.BackendToolbarButtonEventArgs",Sys.EventArgs);Quantumart.QP8.BackendToolbarDropDownListEventArgs=function(){Quantumart.QP8.BackendToolbarDropDownListEventArgs.initializeBase(this)};Quantumart.QP8.BackendToolbarDropDownListEventArgs.prototype={_itemValue:"",_oldSubItemValue:"",_newSubItemValue:"",get_itemValue:function(){return this._itemValue},set_itemValue:function(n){this._itemValue=n},get_oldSubItemValue:function(){return this._oldSubItemValue},set_oldSubItemValue:function(n){this._oldSubItemValue=n},get_newSubItemValue:function(){return this._newSubItemValue},set_newSubItemValue:function(n){this._newSubItemValue=n}};Quantumart.QP8.BackendToolbarDropDownListEventArgs.registerClass("Quantumart.QP8.BackendToolbarDropDownListEventArgs",Sys.EventArgs);