Quantumart.QP8.BackendEntityCheckBoxList=function(n,t,i,r,u,f,e){Quantumart.QP8.BackendEntityCheckBoxList.initializeBase(this,[n,t,i,r,u,f,e]);this._allowMultipleItemSelection=!0;this._selectionMode=Quantumart.QP8.Enums.ListSelectionMode.AllItems};Quantumart.QP8.BackendEntityCheckBoxList.prototype={get_maxListWidth:function(){return this._maxListWidth},set_maxListWidth:function(n){this._maxListWidth=n},get_maxListHeight:function(){return this._maxListHeight},set_maxListHeight:function(n){this._maxListHeight=n},initialize:function(){Quantumart.QP8.BackendEntityCheckBoxList.callBaseMethod(this,"initialize");this._fixListOverflow();this._addGroupCheckbox(this.getListItemCount()<=1);this._syncGroupCheckbox();this._addNewButtonToToolbar();this._attachListItemEventHandlers()},_attachListItemEventHandlers:function(){var n=jQuery(this._listElement);n.delegate("LI INPUT:checkbox","change",jQuery.proxy(this._onSelectedItemChangeHandler,this));n.delegate("LI A","click",jQuery.proxy(this._onItemClickHandler,this));n.delegate("LI A","mouseup",jQuery.proxy(this._onItemClickHandler,this));n=null},_detachListItemEventHandlers:function(){var n=jQuery(this._listElement);n.undelegate("LI INPUT:checkbox","change");n.undelegate("LI A","click");n.undelegate("LI A","mouseup");n=null},getListItems:function(){return jQuery(this._listElement).find("LI")},getSelectedListItems:function(){return jQuery(this._listElement).find("LI:has(INPUT:checkbox:checked)")},selectEntities:function(n){var t=!1;this.deselectAllListItems();!$q.isNullOrEmpty(n)&&$q.isArray(n)&&(jQuery(this._listElement).find("LI INPUT:checkbox").each(function(i,r){var u=jQuery(r);n.indexOf($q.toInt(u.val()))!=-1&&(u.prop("checked",!0),t=!0)}),t&&this._setAsChanged())},_setAsChanged:function(n){var t=jQuery(this._listElement),i,r;t.addClass(CHANGED_FIELD_CLASS_NAME);i=n?"addClass":"removeClass";t[i](REFRESHED_FIELD_CLASS_NAME);r=this.getSelectedEntityIDs();t.trigger(JQ_CUSTOM_EVENT_ON_FIELD_CHANGED,{fieldName:t.data("list_item_name"),value:r})},getSelectedEntities:function(){var n=[],t=this.getSelectedListItems();return t.each(function(t,i){var r=jQuery(i),u=r.find("INPUT:checkbox"),f=r.find("LABEL"),e=$q.toInt(u.val(),0),o=$q.toString(f.text());Array.add(n,{Id:e,Name:o})}),n},_refreshListInner:function(n,t){for(var o,u=jQuery.map(jQuery.grep(n,function(n){return n.Selected===!0}),function(n){return $q.toInt(n.Value)}),f=this.getSelectedEntityIDs(),s=_.union(_.difference(u,f),_.difference(f,u)).length>0,e=jQuery(this._listElement),h=e.find("UL:first"),r=new $.telerik.stringBuilder,i=0;i<n.length;i++)o=n[i],this._getCheckBoxListItemHtml(r,o,i);h.empty().html(r.string());this._refreshGroupCheckbox(n.length);this._syncCountSpan(n.length);s===!0&&this._setAsChanged(t);r=null;$checkboxes=null;e=null;$toolbar=null},selectAllListItems:function(){this._changeAllListItemsSelection(!0)},deselectAllListItems:function(){this._changeAllListItemsSelection(!1)},_changeAllListItemsSelection:function(n){this.getListItems().find("INPUT:checkbox").prop("checked",n);this._setAsChanged()},enableList:function(){jQuery(this._listElement).removeClass(this.LIST_DISABLED_CLASS_NAME);this.getListItems().find("INPUT:checkbox").prop("disabled",!1);this._getGroupCheckbox().prop("disabled",!1);this._enableAllToolbarButtons()},disableList:function(){jQuery(this._listElement).addClass(this.LIST_DISABLED_CLASS_NAME);this.getListItems().find("INPUT:checkbox").prop("disabled",!0);this._getGroupCheckbox().prop("disabled",!0);this._disableAllToolbarButtons()},makeReadonly:function(){this.disableList();var n=this.getListItems().find("INPUT:checkbox:checked");n.each(function(n,t){var i=jQuery(t);i.siblings('input[name="'+i.prop("name")+'"]:hidden').val(i.val())})},_getCheckBoxListItemHtml:function(n,t,i){var r=this._listItemName,u=String.format("{0}_{1}",this._listElementId,i),f=t.Value,e=t.Text,o=t.Selected;n.cat("<li>").cat('<input type="checkbox" ').cat(' name="'+$q.htmlEncode(r)+'"').cat(' id="'+$q.htmlEncode(u)+'"').cat(' value="'+$q.htmlEncode(f)+'"').cat(' class="checkbox chb-list-item qp-notChangeTrack"').catIf(' checked="checked"',o).catIf(" disabled ",this.isListDisabled()).cat("/> ").cat('<input type="hidden" value="false" name="'+$q.htmlEncode(r)+'"/>').cat(this._getIdLinkCode(f)).cat('<label for="'+$q.htmlEncode(u)+'">'+e+"<\/label>").cat("<\/li>")},isListChanged:function(){var n=jQuery(this._listElement),t=n.hasClass(CHANGED_FIELD_CLASS_NAME);return n=null,t},_checkAllowShowingToolbar:function(){return this._addNewActionCode!=ACTION_CODE_NONE},_onSelectedItemChangeHandler:function(){this._syncGroupCheckbox();this._syncCountSpan();this._setAsChanged()},dispose:function(){this._stopDeferredOperations=!0;this._detachListItemEventHandlers();Quantumart.QP8.BackendEntityCheckBoxList.callBaseMethod(this,"dispose")}};Quantumart.QP8.BackendEntityCheckBoxList.registerClass("Quantumart.QP8.BackendEntityCheckBoxList",Quantumart.QP8.BackendEntityDataListBase);