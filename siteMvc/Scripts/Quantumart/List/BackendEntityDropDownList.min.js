Quantumart.QP8.BackendEntityDropDownList=function(n,t,i,r,u,f,e){Quantumart.QP8.BackendEntityDropDownList.initializeBase(this,[n,t,i,r,u,f,e]);this._allowMultipleItemSelection=!1;this._selectionMode=Quantumart.QP8.Enums.ListSelectionMode.AllItems};Quantumart.QP8.BackendEntityDropDownList.prototype={initialize:function(){Quantumart.QP8.BackendEntityDropDownList.callBaseMethod(this,"initialize");this._addReadButtonToToolbar();this._addNewButtonToToolbar();this._attachListItemEventHandlers()},_attachListItemEventHandlers:function(){var n=jQuery(this._listElement);n.bind("change",jQuery.proxy(this._onSelectedItemChangeHandler,this));n=null},_detachListItemEventHandlers:function(){var n=jQuery(this._listElement);n.unbind("change");n=null},getSelectedListItems:function(){return jQuery(this._listElement).find("OPTION[value!='']:selected")},getSelectedEntities:function(){var t=[],i=this.getSelectedListItems();if(i.length>0){var n=i.eq(0),r=$q.toString(n.val()),u=$q.toString(n.text(),"");Array.add(t,{Id:r,Name:u})}return n=null,$list=null,t},getSelectedEntityIDs:function(){return jQuery.grep(jQuery.map(this.getSelectedEntities(),function(n){return $q.toString(n.Id)}),function(n){return n})},selectEntities:function(n){this.deselectAllListItems();$q.isNullOrEmpty(n)||($q.isArray(n)&&n.length>0?this.selectEntities(n[0]):jQuery(this._listElement).find('OPTION[value="'+$q.toString(n,"")+'"]').prop("selected",!0).change())},deselectAllListItems:function(){jQuery(this._listElement).find("OPTION:selected").prop("selected",!1).change()},_checkAllowShowingToolbar:function(){return this._addNewActionCode!=ACTION_CODE_NONE||this._readActionCode!=ACTION_CODE_NONE},_refreshListInner:function(n,t){var i=jQuery(this._listElement),o=i.val(),f=!t,c=f?o:"",l={selectedValue:c,isChanged:f},r,u,s,e,h;for(i.find("OPTION[value!='']").remove(),r=new $.telerik.stringBuilder,u=0;u<n.length;u++)s=n[u],this._getDropDownListItemHtml(r,s,f,l);i.append(r.string());e=i.val();o!=e&&(i.addClass(CHANGED_FIELD_CLASS_NAME),h=t?"addClass":"removeClass",i[h](REFRESHED_FIELD_CLASS_NAME),i.trigger(JQ_CUSTOM_EVENT_ON_FIELD_CHANGED,{fieldName:i.data("list_item_name"),value:e}));r=null;i=null},enableList:function(){jQuery(this._listElement).removeClass(this.LIST_DISABLED_CLASS_NAME).prop("disabled",!1);this._enableAllToolbarButtons()},disableList:function(){jQuery(this._listElement).addClass(this.LIST_DISABLED_CLASS_NAME).prop("disabled",!0);this._disableAllToolbarButtons()},makeReadonly:function(){var n=jQuery(this._listElement),t=n.find("OPTION:selected").val(),i;$q.isNullOrEmpty(t)||(i=n.siblings('input[name="'+n.prop("name")+'"]:hidden'),i.length>0?i.val(t):n.after('<input type="hidden" name="'+n.prop("name")+'" value="'+t+'" />'));n=null;this.disableList()},_getDropDownListItemHtml:function(n,t,i,r){var u=t.Value,f=t.Text,e;this._showIds&&(f="(#"+u+") - "+f);e=!1;e=i?r.selectedValue==u:t.Selected;n.cat("<option").cat(' value="'+$q.htmlEncode(u)+'"').catIf(' selected="selected"',e).cat(">").cat(f).cat("<\/option>\n")},isListChanged:function(){var n=jQuery(this._listElement),t=n.hasClass(CHANGED_FIELD_CLASS_NAME);return n=null,t},_onSelectedItemChangeHandler:function(){this.isListDisabled()||this._refreshReadToolbarButton(!0)},getListItems:function(){return jQuery(this._listElement).find("OPTION")},dispose:function(){this._stopDeferredOperations=!0;this._detachListItemEventHandlers();Quantumart.QP8.BackendEntityDropDownList.callBaseMethod(this,"dispose")}};Quantumart.QP8.BackendEntityDropDownList.registerClass("Quantumart.QP8.BackendEntityDropDownList",Quantumart.QP8.BackendEntityDataListBase);