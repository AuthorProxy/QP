var EVENT_TYPE_ENTITY_EDITOR_IS_READY="OnEntityEditorIsReady",EVENT_TYPE_ENTITY_EDITOR_DISPOSED="OnEntityEditorDisposed",EVENT_TYPE_ENTITY_EDITOR_FIELD_CHANGED="OnEntityEditorFieldChanged",EVENT_TYPE_ENTITY_EDITOR_ALL_FIELD_INVALIDATE="OnEntityEditorAllFieldInvalidate";Quantumart.QP8.BackendEntityEditorManager=function(){Quantumart.QP8.BackendEntityEditorManager.initializeBase(this)};Quantumart.QP8.BackendEntityEditorManager.prototype={_editorGroups:{},generateEditorGroupCode:function(n,t){return String.format("{0}_{1}",n,t)},getEditorGroup:function(n){var t=null;return this._editorGroups[n]&&(t=this._editorGroups[n]),t},createEditorGroup:function(n){var t=this.getEditorGroup(n);return t||(t={},this._editorGroups[n]=t),t},refreshEditorGroup:function(n,t,i){var r=this.getEditorGroup(this.generateEditorGroupCode(n,t)),u;if(r)for(u in r)this.refreshEditor(u,i);r=null},removeEditorGroup:function(n){$q.removeProperty(this._editorGroups,n)},getEditor:function(n){var i=null,r,t;for(r in this._editorGroups)if(t=this._editorGroups[r],t[n]){i=t[n];break}return i},createEditor:function(n,t,i,r,u,f){var s=this.generateEditorGroupCode(t,i),e={},o,h;return jQuery.extend(e,u),f&&(f.contextQuery&&jQuery.extend(e,{contextQuery:f.contextQuery}),f.eventArgsAdditionalData&&((i==0||f.eventArgsAdditionalData.restoring===!0)&&f.eventArgsAdditionalData.initFieldValues&&jQuery.extend(e,{initFieldValues:f.eventArgsAdditionalData.initFieldValues,restoring:f.eventArgsAdditionalData.restoring}),f.eventArgsAdditionalData.disabledFields&&jQuery.extend(e,{disabledFields:f.eventArgsAdditionalData.disabledFields}),f.eventArgsAdditionalData.hideFields&&jQuery.extend(e,{hideFields:f.eventArgsAdditionalData.hideFields}),f.eventArgsAdditionalData.contextQuery&&jQuery.extend(e,{contextQuery:f.eventArgsAdditionalData.contextQuery})),e.isBindToExternal=f.isBindToExternal),o=new Quantumart.QP8.BackendEntityEditor(s,n,t,i,r,e),o.set_editorManagerComponent(this),h=this.createEditorGroup(s),h[s]=o,o},refreshEditor:function(n,t){var i=this.getEditor(n);i&&i.refreshEditor(t);i=null},removeEditor:function(n){var r=this.getEditor(n),t,i;r&&(t=r.get_editorGroupCode(),i=this.getEditorGroup(t),$q.removeProperty(i,n),$q.getHashKeysCount(i)==0&&this.removeEditorGroup(t))},destroyEditor:function(n){var t=this.getEditor(n);t!=null&&(t.dispose&&t.dispose(),t=null)},onActionExecuted:function(n){var t=n.get_entityTypeCode(),o=n.get_actionTypeCode(),r=n.get_actionCode(),i=n.get_entityId(),u,f,e;r==ACTION_CODE_MULTIPLE_PUBLISH_ARTICLES?(u=n.get_isMultipleEntities()?$o.getEntityIDsFromEntities(n.get_entities()):[i],f=this,jQuery.each(u,function(n,t){f.refreshEditorGroup(ENTITY_TYPE_CODE_ARTICLE,t)})):o==ACTION_TYPE_CODE_CHANGE_LOCK?this.refreshEditorGroup(t,i):n.get_isRestored()&&t==ENTITY_TYPE_CODE_ARTICLE_VERSION?(e=String.format($l.EntityEditor.autoRefreshConfirmMessageAfterArticleRestoring,i),this.refreshEditorGroup(ENTITY_TYPE_CODE_ARTICLE,n.get_parentEntityId(),{confirmMessageText:e})):r==ACTION_CODE_ENABLE_ARTICLES_PERMISSIONS&&t==ENTITY_TYPE_CODE_CONTENT&&this.refreshEditorGroup(t,i)},onEntityEditorReady:function(n){var t=new Sys.EventArgs;t.documentWrapperElementId=n;this.notify(EVENT_TYPE_ENTITY_EDITOR_IS_READY,t)},onEntityEditorDisposed:function(n){var t=new Sys.EventArgs;t.documentWrapperElementId=n;this.notify(EVENT_TYPE_ENTITY_EDITOR_DISPOSED,t)},onFieldValueChanged:function(n){var t=new Sys.EventArgs;t.fieldChangeInfo=n;this.notify(EVENT_TYPE_ENTITY_EDITOR_FIELD_CHANGED,t)},onAllFieldInvalidate:function(n){var t=new Sys.EventArgs;t.documentWrapperElementId=n;this.notify(EVENT_TYPE_ENTITY_EDITOR_ALL_FIELD_INVALIDATE,t)},dispose:function(){if(Quantumart.QP8.BackendEntityEditorManager.callBaseMethod(this,"dispose"),this._editorGroups){for(editorGroupCode in this._editorGroups){var n=this._editorGroups[editorGroupCode];for(documentWrapperElementId in n)this.destroyEditor(documentWrapperElementId);delete this._editorGroups[editorGroupCode]}this._editorGroups=null}Quantumart.QP8.BackendEntityEditorManager._instance=null;$q.collectGarbageInIE()}};Quantumart.QP8.BackendEntityEditorManager._instance=null;Quantumart.QP8.BackendEntityEditorManager.getInstance=function(){return Quantumart.QP8.BackendEntityEditorManager._instance==null&&(Quantumart.QP8.BackendEntityEditorManager._instance=new Quantumart.QP8.BackendEntityEditorManager),Quantumart.QP8.BackendEntityEditorManager._instance};Quantumart.QP8.BackendEntityEditorManager.destroyInstance=function(){Quantumart.QP8.BackendEntityEditorManager._instance&&Quantumart.QP8.BackendEntityEditorManager._instance.dispose()};Quantumart.QP8.BackendEntityEditorManager.registerClass("Quantumart.QP8.BackendEntityEditorManager",Quantumart.QP8.Observable);