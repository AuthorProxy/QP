Quantumart.QP8.BackendBreadCrumbsManager=function(n){if(Quantumart.QP8.BackendBreadCrumbsManager.initializeBase(this),!n)throw new Error($l.BreadCrumbs.breadCrumbsContainerElementIdNotSpecified);this._breadCrumbsContainerElementId=n};Quantumart.QP8.BackendBreadCrumbsManager.prototype={_breadCrumbsContainerElementId:"",_breadCrumbs:{},ITEM_CLASS_NAME:"item",getBreadCrumbs:function(n){var t=null;return this._breadCrumbs[n]&&(t=this._breadCrumbs[n]),t},createBreadCrumbs:function(n,t){var i=new Quantumart.QP8.BackendBreadCrumbs(n,t);return i.set_manager(this),i.initialize(),this._breadCrumbs[n]=i,i},refreshBreadCrumbs:function(n,t){var i=this.getBreadCrumbs(n);i&&i.addItemsToBreadCrumbs(t);i=null},removeBreadCrumbs:function(n){var t=this.getBreadCrumbs(n);t&&$q.removeProperty(this._breadCrumbs,n)},destroyBreadCrumbs:function(n){var t=this.getBreadCrumbs(n);t&&(this.removeBreadCrumbs(n),t.dispose&&t.dispose(),t=null)},generateItemCode:function(n,t,i){return String.format("{0}_{1}_{2}",n,$q.toInt(t,0),i)},_getBreadCrumbsElementIdByItem:function(n){var i="",t=$q.toJQuery(n).parent().parent();return $q.isNullOrEmpty(t)||(i=t.attr("id")),t=null,i},getItems:function(n){return jQuery("#"+this._breadCrumbsContainerElementId).find("LI[code = '"+n+"']."+this.ITEM_CLASS_NAME)},getBreadCrumbsListByItemCode:function(n){for(var f,t,u=[],i=this.getItems(n),r=0,e=i.length;r<e;r++)f=this._getBreadCrumbsElementIdByItem(i.eq(r)),t=this.getBreadCrumbs(f),t&&Array.add(u,t),t=null;return i=null,u},refreshBreadCrumbsList:function(n,t,i){for(var r,u=this.getBreadCrumbsListByItemCode(this.generateItemCode(n,t,i)),f=0,e=u.length;f<e;f++)r=u[f],r&&r.addItemsToBreadCrumbs(),r=null;u=null},onActionExecuted:function(n){var r=n.get_entityTypeCode(),t=n.get_parentEntityId(),u=n.get_actionTypeCode(),h=n.get_entityId(),e=n.get_entities(),i,o,f,s;if(u==ACTION_TYPE_CODE_RESTORE||n.get_isUpdated())this.refreshBreadCrumbsList(r,t,h);else if(u==ACTION_TYPE_CODE_MULTIPLE_RESTORE)for(i=0,o=e.length;i<o;i++)this.refreshBreadCrumbsList(r,t,e[i].Id);u==ACTION_TYPE_CODE_RESTORE&&r==ENTITY_TYPE_CODE_ARTICLE_VERSION&&(f=ENTITY_TYPE_CODE_ARTICLE,s=$q.toInt($o.getParentEntityId(f,t),0),this.refreshBreadCrumbsList(f,s,t))},dispose:function(){if(Quantumart.QP8.BackendBreadCrumbsManager.callBaseMethod(this,"dispose"),this._breadCrumbs){for(breadCrumbsElementId in this._breadCrumbs)this.destroyBreadCrumbs(breadCrumbsElementId);this._breadCrumbs=null}Quantumart.QP8.BackendBreadCrumbsManager._instance=null}};Quantumart.QP8.BackendBreadCrumbsManager._instance=null;Quantumart.QP8.BackendBreadCrumbsManager.getInstance=function(n,t){return Quantumart.QP8.BackendBreadCrumbsManager._instance==null&&(Quantumart.QP8.BackendBreadCrumbsManager._instance=new Quantumart.QP8.BackendBreadCrumbsManager(n,t)),Quantumart.QP8.BackendBreadCrumbsManager._instance};Quantumart.QP8.BackendBreadCrumbsManager.destroyInstance=function(){Quantumart.QP8.BackendBreadCrumbsManager._instance&&Quantumart.QP8.BackendBreadCrumbsManager._instance.dispose()};Quantumart.QP8.BackendBreadCrumbsManager.registerClass("Quantumart.QP8.BackendBreadCrumbsManager",Quantumart.QP8.Observable);