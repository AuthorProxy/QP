Quantumart.QP8.BackendEntityDataListManager=function(){Quantumart.QP8.BackendEntityDataListManager.initializeBase(this)};Quantumart.QP8.BackendEntityDataListManager.prototype={_listGroups:{},_valueStorage:{},generateListGroupCode:function(n,t){return String.format("{0}_{1}",n,t)},getListGroup:function(n){var t=null;return this._listGroups[n]&&(t=this._listGroups[n]),t},createListGroup:function(n){var t=this.getListGroup(n);return t||(t={},this._listGroups[n]=t),t},refreshListGroup:function(n,t,i){var r=this.getListGroup(this.generateListGroupCode(n,t)),u;if(r)for(u in r)this.refreshList(u,i);r=null},getList:function(n){var i=null,r,t;for(r in this._listGroups)t=this._listGroups[r],t[n]&&(i=t[n]);return i},createList:function(n,t,i,r,u,f){var o=this.generateListGroupCode(t,i),e=null,s;return u==Quantumart.QP8.Enums.DataListType.DropDownList?e=new Quantumart.QP8.BackendEntityDropDownList(o,n,t,i,r,u,f):u==Quantumart.QP8.Enums.DataListType.CheckBoxList?e=new Quantumart.QP8.BackendEntityCheckBoxList(o,n,t,i,r,u,f):u==Quantumart.QP8.Enums.DataListType.SingleItemPicker?e=new Quantumart.QP8.BackendEntitySingleItemPicker(o,n,t,i,r,u,f):u==Quantumart.QP8.Enums.DataListType.MultipleItemPicker&&(e=new Quantumart.QP8.BackendEntityMultipleItemPicker(o,n,t,i,r,u,f)),e?(e.set_listManagerComponent(this),e.initialize(),s=this.createListGroup(o),s[n]=e):alert("Данный тип списка не поддерживается!"),e},refreshList:function(n,t){var i=this.getList(n);i&&i.refreshList(t);i=null},removeList:function(n){var i=this.getList(n),t,r;i&&(t=i.get_listGroupCode(),r=this.getListGroup(t),delete this._listGroups[t][n],$q.getHashKeysCount(r)==0&&delete this._listGroups[t])},destroyList:function(n){var t=this.getList(n);t!=null&&(t.dispose&&t.dispose(),t=null)},onActionExecuted:function(n){var t=n.get_entityTypeCode(),i=n.get_parentEntityId(),u=n.get_actionTypeCode(),r=0;(n.get_isSaved()||n.get_isUpdated())&&(r=n.get_entityId());(n.get_isSaved()||n.get_isUpdated()||u==ACTION_TYPE_CODE_COPY||n.get_isRemoving()||n.get_isArchiving()||n.get_isRestoring())&&this.refreshListGroup(t,i,r);(n.get_isArchiving()||n.get_isRemoving())&&t==ENTITY_TYPE_CODE_ARTICLE?this.refreshListGroup(ENTITY_TYPE_CODE_ARCHIVE_ARTICLE,i):n.get_isRestoring()&&t==ENTITY_TYPE_CODE_ARCHIVE_ARTICLE&&this.refreshListGroup(ENTITY_TYPE_CODE_ARTICLE,i)},getValueStorage:function(){return this._valueStorage},dispose:function(){if(Quantumart.QP8.BackendEntityDataListManager.callBaseMethod(this,"dispose"),this._listGroups){for(listGroupCode in this._listGroups){var n=this._listGroups[listGroupCode];for(listElementId in n)this.destroyList(listElementId);delete this._listGroups[listGroupCode]}this._listGroups=null}$q.collectGarbageInIE()}};Quantumart.QP8.BackendEntityDataListManager._instance=null;Quantumart.QP8.BackendEntityDataListManager.getInstance=function(){return Quantumart.QP8.BackendEntityDataListManager._instance==null&&(Quantumart.QP8.BackendEntityDataListManager._instance=new Quantumart.QP8.BackendEntityDataListManager),Quantumart.QP8.BackendEntityDataListManager._instance};Quantumart.QP8.BackendEntityDataListManager.destroyInstance=function(){Quantumart.QP8.BackendEntityDataListManager._instance&&Quantumart.QP8.BackendEntityDataListManager._instance.dispose()};Quantumart.QP8.BackendEntityDataListManager.registerClass("Quantumart.QP8.BackendEntityDataListManager",Quantumart.QP8.Observable);