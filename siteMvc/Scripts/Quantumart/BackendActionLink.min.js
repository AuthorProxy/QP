var EVENT_TYPE_ACTION_LINK_CLICK="OnActionLinkClick",EVENT_TYPE_ACTION_LINK_SELF_CLICK="OnActionLinkSelfClick";Quantumart.QP8.BackendActionLink=function(n,t){Quantumart.QP8.BackendActionLink.initializeBase(this);this._actionLinkElementId=n;$q.isObject(t)&&(t.entityId&&(this._entityId=t.entityId),t.entityName&&(this._entityName=t.entityName),t.parentEntityId&&(this._parentEntityId=t.parentEntityId),t.actionTypeCode&&(this._actionTypeCode=t.actionTypeCode),t.actionCode&&(this._actionCode=t.actionCode),t.context&&(this._context=t.context),this._actionTargetType=$q.isNull(t.actionTargetType)?Quantumart.QP8.Enums.ActionTargetType.NewTab:t.actionTargetType);this._onActionExecutingHandler=jQuery.proxy(this.onActionExecuting,this)};Quantumart.QP8.BackendActionLink.prototype={_actionLinkElementId:"",_actionLinkElement:null,_iconWrapperElement:null,_captionElement:null,_entityId:0,_entityName:"",_parentEntityId:0,_actionTypeCode:"",_actionCode:"",_actionTargetType:null,_context:null,ACTION_LINK_DISABLED_CLASS_NAME:"disabled",ACTION_LINK_BUSY_CLASS_NAME:"busy",get_entityId:function(){return this._entityId},set_entityId:function(n){this._entityId=n},get_entityName:function(){return this._entityName},set_entityName:function(n){this._entityName=n},get_parentEntityId:function(){return this._parentEntityId},set_parentEntityId:function(n){this._parentEntityId=n},get_actionTypeCode:function(){return this._actionTypeCode},set_actionTypeCode:function(n){this._actionTypeCode=n},get_actionCode:function(){return this._actionCode},set_actionCode:function(n){this._actionCode=n},get_actionTargetType:function(){return this._actionTargetType},set_actionTargetType:function(n){this._actionTargetType=n},_onActionExecutingHandler:null,initialize:function(){var n=jQuery("#"+this._actionLinkElementId),t=n.find("SPAN.icon:first"),i=n.find("SPAN.text:first");this._actionLinkElement=n.get(0);this._iconWrapperElement=t.get(0);this._captionElement=i.get(0);this._attachActionLinkEventHandlers()},_attachActionLinkEventHandlers:function(){var n=jQuery(this._actionLinkElement);n.bind("click",this._onActionExecutingHandler);n.bind("mouseup",this._onActionExecutingHandler);n=null},_detachActionLinkEventHandlers:function(){var n=jQuery(this._actionLinkElement);n.unbind("click",this._onActionExecutingHandler);n.unbind("mouseup",this._onActionExecutingHandler);n=null},markActionLinkAsBusy:function(){var n=jQuery(this._actionLinkElement);n.find("A:first").addClass(this.ACTION_LINK_BUSY_CLASS_NAME);n=null},unmarkActionLinkAsBusy:function(){var n=jQuery(this._actionLinkElement);n.find("A:first").removeClass(this.ACTION_LINK_BUSY_CLASS_NAME);n=null},isActionLinkBusy:function(){var n=jQuery(this._actionLinkElement),t=n.find("A:first").hasClass(this.ACTION_LINK_BUSY_CLASS_NAME);return n=null,t},enableActionLink:function(){var n=jQuery(this._actionLinkElement);n.find("A:first").removeClass(this.ACTION_LINK_DISABLED_CLASS_NAME);n=null},disableActionLink:function(){var n=jQuery(this._actionLinkElement);n.find("A:first").addClass(this.ACTION_LINK_DISABLED_CLASS_NAME);n=null},isActionLinkDisabled:function(){var n=jQuery(this._actionLinkElement),t=n.find("A:first").hasClass(this.ACTION_LINK_DISABLED_CLASS_NAME);return n=null,t},onActionExecuting:function(n){var e,f,r,o,t,u,i;n.preventDefault();e=n.type=="click"&&(n.which==1||n.which==0);f=n.type=="mouseup"&&n.which==2;this.isActionLinkDisabled()||this.isActionLinkBusy()||!(e||f)||(r=this._actionTargetType,$q.isNull(r)?alert($l.ActionLink.actionTargetTypeNotSpecified):(o=this._actionCode,t=$a.getBackendActionByCode(o),t&&(u=new Quantumart.QP8.BackendActionParameters({entityId:this._entityId,entityName:this._entityName,parentEntityId:this._parentEntityId,context:this._context,entityTypeCode:t.EntityType.Code,forceOpenWindow:r==Quantumart.QP8.Enums.ActionTargetType.NewWindow}),u.correct(t),i=$a.getEventArgsFromActionWithParams(t,u),t.ActionType.Code===ACTION_TYPE_CODE_ADD_NEW&&i.set_context(jQuery.extend({ctrlKey:n.ctrlKey||f},i.get_context())),t.IsInterface&&r==Quantumart.QP8.Enums.ActionTargetType.Self?this.notify(EVENT_TYPE_ACTION_LINK_SELF_CLICK,i):this.notify(EVENT_TYPE_ACTION_LINK_CLICK,i),i=null,u=null)))},dispose:function(){Quantumart.QP8.BackendActionLink.callBaseMethod(this,"dispose");this._detachActionLinkEventHandlers();this._iconWrapperElement&&(this._iconWrapperElement=null);this._captionElement&&(this._captionElement=null);this._actionLinkElement=null;$q.collectGarbageInIE()}};Quantumart.QP8.BackendActionLink.registerClass("Quantumart.QP8.BackendActionLink",Quantumart.QP8.Observable);