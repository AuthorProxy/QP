var EVENT_TYPE_ACTION_PERMISSIONS_VIEW_EXECUTING="OnActionPermissionsViewExecuting";Quantumart.QP8.BackendActionPermissionView=function(n){Quantumart.QP8.BackendActionPermissionView.initializeBase(this);this._viewElementId=n};Quantumart.QP8.BackendActionPermissionView.prototype={_viewElementId:"",_treeComponent:null,_searchBlockComponent:null,initialize:function(){var n=jQuery("#"+this._viewElementId),t=jQuery(".treeContainer .t-treeview").attr("id");this._treeComponent=new Quantumart.QP8.BackendActionPermissionTree(t);this._treeComponent.attachObserver(EVENT_TYPE_ACTION_PERMISSIONS_TREE_EXECUTING,jQuery.proxy(this._onActionExecuting,this));this._treeComponent.initialize();this._searchBlockComponent=new Quantumart.QP8.BackendUserAndGroupSearchBlock(this._viewElementId,jQuery.proxy(this._onApplyFilter,this));n=null},_onApplyFilter:function(){var n=this._searchBlockComponent.getSearchData();this._treeComponent.set_userId(n.userId);this._treeComponent.set_groupId(n.groupId);this._treeComponent.refreshTree()},_onActionExecuting:function(n,t,i){var r=i.get_actionCode(),u,f;(r==ACTION_CODE_CHANGE_ENTITY_TYPE_PERMISSION_NODE||r==ACTION_CODE_REMOVE_ENTITY_TYPE_PERMISSION_NODE||r==ACTION_CODE_CHANGE_ACTION_PERMISSION_NODE||r==ACTION_CODE_REMOVE_ACTION_PERMISSION_NODE)&&(u=i.get_context(),i.set_context(jQuery.extend(u,{additionalUrlParameters:this._searchBlockComponent.getSearchData()})));f=$a.getBackendActionByCode(i.get_actionCode());f&&this.notify(EVENT_TYPE_ACTION_PERMISSIONS_VIEW_EXECUTING,i)},get_Tree:function(){return this._treeComponent},dispose:function(){Quantumart.QP8.BackendActionPermissionViewManager.getInstance().destroyView();this._searchBlockComponent&&(this._searchBlockComponent.dispose(),this._searchBlockComponent=null);this._treeComponent&&(this._treeComponent.detachObserver(EVENT_TYPE_ACTION_PERMISSIONS_TREE_EXECUTING),this._treeComponent.dispose(),this._treeComponent=null)}};Quantumart.QP8.BackendActionPermissionView.registerClass("Quantumart.QP8.BackendActionPermissionView",Quantumart.QP8.Observable);