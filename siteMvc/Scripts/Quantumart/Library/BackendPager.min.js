var EVENT_TYPE_PAGE_NUMBER_CHANGED="OnPageNumberChanged";Quantumart.QP8.BackendPagerEventArgs=function(n){Quantumart.QP8.BackendPagerEventArgs.initializeBase(this);this._pageNumber=n};Quantumart.QP8.BackendPagerEventArgs.prototype={_pageNumber:0,get_PageNumber:function(){return this._pageNumber}};Quantumart.QP8.BackendPagerEventArgs.registerClass("Quantumart.QP8.BackendPagerEventArgs",Sys.EventArgs);Quantumart.QP8.BackendPager=function(n){Quantumart.QP8.BackendPager.initializeBase(this);this._pagerElement=n;this._onPageClickHandler=jQuery.proxy(this._onPageClick,this);this._onInHoverHandler=jQuery.proxy(this._onInHover,this);this._onOutHoverHandler=jQuery.proxy(this._onOutHover,this)};Quantumart.QP8.BackendPager.prototype={_pagerElement:null,_arrowFirstElement:null,_arrowPrevElement:null,_arrowLastElement:null,_arrowNextElement:null,_pageFrameElement:null,_statusTextElement:null,_totalCount:0,_pageSize:10,_pageFrameSize:10,_pageCount:0,_pageFrameCount:0,_currentPageNumber:0,_currentPageFrameNumber:0,_currentFrameStartPageNumber:0,_currentFrameEndPageNumber:0,_pageFrameRedraw:function(){var i=jQuery(this._pageFrameElement),n,t;if(i.children().remove(),n=new $.telerik.stringBuilder,n.catIf('<a class="t-link qp-link-prev-frame qp-page-link">...<\/a>',this._currentPageFrameNumber>0),this._totalCount>0)for(t=this._currentFrameStartPageNumber;t<=this._currentFrameEndPageNumber;t++)t!=this._currentPageNumber?n.cat('<a class="t-link qp-page-link">').cat(t+1).cat("<\/a>"):n.cat('<span class="t-state-active">').cat(t+1).cat("<\/span>");n.catIf('<a class="t-link qp-link-next-frame qp-page-link">...<\/a>',this._currentPageFrameNumber<this._pageFrameCount-1);i.html(n.string());i=null;n=null},_setPageNumber:function(n){this.set({currentPageNumber:n});this.redraw()},initialize:function(){var n=jQuery(this._pagerElement),t;n.addClass("t-widget t-grid");t='<div class="t-grid-pager t-grid-bottom"><div class="t-pager t-reset"><a href="#" class="t-link qp-link-arrow-first qp-page-link"><span class="t-icon t-arrow-first">first<\/span><\/a><a href="#" class="t-link qp-link-arrow-prev qp-page-link"><span class="t-icon t-arrow-prev">prev<\/span><\/a><div class="t-numeric"><\/div><a href="#" class="t-link qp-link-arrow-next qp-page-link"><span class="t-icon t-arrow-next">next<\/span><\/a><a href="#" class="t-link qp-link-arrow-last qp-page-link"><span class="t-icon t-arrow-last">last<\/span><\/a><\/div><div class="t-status-text"><\/div>';n.html(t);this._arrowFirstElement=n.find("span.t-arrow-first").closest("a.t-link").get(0);this._arrowPrevElement=n.find("span.t-arrow-prev").closest("a.t-link").get(0);this._arrowNextElement=n.find("span.t-arrow-next").closest("a.t-link").get(0);this._arrowLastElement=n.find("span.t-arrow-last").closest("a.t-link").get(0);n.delegate("a.qp-page-link","click",this._onPageClickHandler).delegate("a.qp-page-link","mouseenter",this._onInHoverHandler).delegate("a.qp-page-link","mouseleave",this._onOutHoverHandler);this._pageFrameElement=n.find("div.t-numeric").get(0);this._statusTextElement=n.find("div.t-status-text").get(0);this.set();this.redraw();n=null},set:function(n){$q.isObject(n)&&($q.isNull(n.totalCount)||(this._totalCount=$q.toInt(n.totalCount<0?0:n.totalCount)),$q.isNull(n.pageSize)||(this._pageSize=$q.toInt(n.pageSize<1?1:n.pageSize)),$q.isNull(n.pageFrameSize)||(this._pageFrameSize=$q.toInt(n.pageFrameSize<1?1:n.pageFrameSize)),$q.isNull(n.currentPageNumber)||(this._currentPageNumber=$q.toInt(n.currentPageNumber<0?0:n.currentPageNumber)));this._pageCount=Math.floor(this._totalCount/this._pageSize)+(this._totalCount%this._pageSize==0?0:1);this._currentPageNumber>=this._pageCount&&(this._currentPageNumber=this._pageCount-1);this._currentPageNumber<0&&(this._currentPageNumber=0);this._pageFrameCount=Math.floor(this._pageCount/this._pageFrameSize)+(this._pageCount%this._pageFrameSize==0?0:1);this._currentPageFrameNumber=Math.floor(this._currentPageNumber/this._pageFrameSize);this._currentFrameStartPageNumber=Quantumart.QP8.BackendPager.getFrameStartPageNumber(this._currentPageFrameNumber,this._pageFrameSize);this._currentFrameEndPageNumber=Quantumart.QP8.BackendPager.getFrameEndPageNumber(this._currentPageFrameNumber,this._pageFrameSize,this._pageCount)},redraw:function(){this._currentPageNumber==0?(jQuery(this._arrowFirstElement).addClass("t-state-disabled").removeClass("t-state-hover"),jQuery(this._arrowPrevElement).addClass("t-state-disabled").removeClass("t-state-hover")):(jQuery(this._arrowFirstElement).removeClass("t-state-disabled"),jQuery(this._arrowPrevElement).removeClass("t-state-disabled"));this._currentPageNumber>=this._pageCount-1?(jQuery(this._arrowLastElement).addClass("t-state-disabled").removeClass("t-state-hover"),jQuery(this._arrowNextElement).addClass("t-state-disabled").removeClass("t-state-hover")):(jQuery(this._arrowLastElement).removeClass("t-state-disabled"),jQuery(this._arrowNextElement).removeClass("t-state-disabled"));this._totalCount>0?jQuery(this._statusTextElement).html(String.format($l.Pager.statusTextTemplate,this._currentPageNumber*this._pageSize+1,Math.min(this._currentPageNumber*this._pageSize+this._pageSize,this._totalCount),this._totalCount)):jQuery(this._statusTextElement).html(String.format($l.Pager.statusTextTemplate,0,0,0));this._pageFrameRedraw()},get_pageCount:function(){return this._pageCount},get_pageNumber:function(){return this._currentPageNumber},get_pageSize:function(){return this._pageSize},_onInHover:function(n){var t=jQuery(n.currentTarget);t.hasClass("t-state-disabled")||t.addClass("t-state-hover")},_onOutHover:function(n){jQuery(n.currentTarget).removeClass("t-state-hover")},_onPageClick:function(n){var t=jQuery(n.currentTarget),i,r;t.hasClass("t-state-disabled")||(i=0,i=t.hasClass("qp-link-arrow-first")?0:t.hasClass("qp-link-arrow-prev")?this._currentPageNumber-1:t.hasClass("qp-link-arrow-next")?this._currentPageNumber+1:t.hasClass("qp-link-arrow-last")?this._pageCount-1:t.hasClass("qp-link-prev-frame")?Quantumart.QP8.BackendPager.getFrameEndPageNumber(this._currentPageFrameNumber-1,this._pageFrameSize,this._pageCount):t.hasClass("qp-link-next-frame")?Quantumart.QP8.BackendPager.getFrameStartPageNumber(this._currentPageFrameNumber+1,this._pageFrameSize):$q.toInt(t.html())-1,r=new Quantumart.QP8.BackendPagerEventArgs(i),this.notify(EVENT_TYPE_PAGE_NUMBER_CHANGED,r),r=null);t=null},dispose:function(){var n=jQuery(this._pagerElement);n.find("a.qp-page-link").undelegate();n=null;this._arrowFirstElement=null;this._arrowLastElement=null;this._arrowNextElement=null;this._arrowPrevElement=null;this._pageFrameElement=null;this._pagerElement=null;this._statusTextElement=null;this._onPageClickHandler=null;this._onInHoverHandler=null;this._onOutHoverHandler=null}};Quantumart.QP8.BackendPager.getFrameStartPageNumber=function(n,t){return n*t};Quantumart.QP8.BackendPager.getFrameEndPageNumber=function(n,t,i){return Math.min(n*t+(t==0?0:t-1),i==0?0:i-1)};Quantumart.QP8.BackendPager.registerClass("Quantumart.QP8.BackendPager",Quantumart.QP8.Observable);