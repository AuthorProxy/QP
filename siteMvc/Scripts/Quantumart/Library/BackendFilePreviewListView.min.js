Quantumart.QP8.BackendFilePreviewListView=function(n,t,i,r){Quantumart.QP8.BackendFilePreviewListView.initializeBase(this,[n,t,i,r])};Quantumart.QP8.BackendFilePreviewListView.prototype={initialize:function(){var t=jQuery(this._fileListContentElement),n,i;t.html('<div class="fileListPreviewContainer"><\/div>');t.delegate(".fileItem input:checkbox","click",jQuery.proxy(this._onFileCheckBoxClickedHandler,this));t.delegate(".fileItem","click",jQuery.proxy(this._onFileContainerClickedHandler,this));$q.isNullOrWhiteSpace(this._contextMenuCode)||(n=new Quantumart.QP8.BackendContextMenu(this._contextMenuCode,String.format("{0}_ContextMenu",t.attr("id")),{targetElements:this._fileListContentElement,allowManualShowing:!0,zIndex:this._zIndex}),n.initialize(),n.addMenuItemsToMenu(!1),i=n.getContextMenuEventType(),t.delegate(".fileItem",i,jQuery.proxy(this._onContextMenuHandler,this)),n.attachObserver(EVENT_TYPE_CONTEXT_MENU_ITEM_CLICKING,jQuery.proxy(this._onNodeContextMenuItemClickingHandler,this)),n.attachObserver(EVENT_TYPE_CONTEXT_MENU_HIDDEN,jQuery.proxy(this._onNodeContextMenuHiddenHandler,this)),this._contextMenuComponent=n,n=null);t=null},redraw:function(n,t){var u=jQuery(this._fileListContentElement),f=u.find(".fileListPreviewContainer"),i=new $.telerik.stringBuilder,r=this;n.TotalRecords>0?jQuery.each(n.Data,function(n,u){var f=r._getThumbnailLink(u,t);i.cat(String.format('<div class="fileItem" data-file_name="{0}">',u.FullName)).catIf('<input type="checkbox" />',r._selectMode==FILE_LIST_SELECT_MODE_MULTIPLE).cat(String.format('<div class="preview" style="background-image:url({3});"><\/div><h5><ul><li title="{4}">{0}<\/li><\/ul><\/h5><span>{1}<\/span><span>{2}<\/span><\/div>',u.Name,u.Modified,u.Size,r._getThumbnailLink(u,t),u.FullName))}):i.cat($l.FileList.noRecords);f.html(i.string());f=null;u=null;i=null;this._raiseSelectEvent()},dispose:function(){Quantumart.QP8.BackendFilePreviewListView.callBaseMethod(this,"dispose")},shortNameLength:15,_getThumbnailLink:function(n,t){if(n.FileType==Quantumart.QP8.Enums.LibraryFileType.Image){var i="";return t.fileEntityTypeCode==ENTITY_TYPE_CODE_SITE_FILE?i=CONTROLLER_URL_THUMBNAIL+"_SiteFileThumbnail":t.fileEntityTypeCode==ENTITY_TYPE_CODE_CONTENT_FILE&&(i=CONTROLLER_URL_THUMBNAIL+"_ContentFileThumbnail"),$q.htmlEncode(String.format("'{0}?folderId={1}&fileName={2}&{3}'",i,t.folderId,n.FullName,(new Date).getTime()))}return $q.htmlEncode(String.format("'{0}{1}'",THEME_IMAGE_FOLDER_URL_BIG_FILE_TYPE_ICONS,n.BigIconLink))}};Quantumart.QP8.BackendFilePreviewListView.registerClass("Quantumart.QP8.BackendFilePreviewListView",Quantumart.QP8.BackendFileNameListView);