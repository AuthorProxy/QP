Quantumart.QP8.BackendHtmlUploader=function(n,t){Quantumart.QP8.BackendHtmlUploader.initializeBase(this);this._parentElement=n;$q.isNull(t)||($q.isNull(t.extensions)||(this._extensions=t.extensions),$q.isNull(t.resolveName)||(this._resolveName=t.resolveName))};Quantumart.QP8.BackendHtmlUploader.prototype={_parentElement:null,_$telerikUpload:null,_folderPath:"",_extensions:"",_resolveName:!1,_uploadedFiles:[],initialize:function(){var n=jQuery(".t-upload input[type='file']",this._parentElement).data("tUpload");n.wrapper.unbind("upload");n.wrapper.unbind("success");n.wrapper.unbind("complete");n.wrapper.unbind("select");n.wrapper.unbind("error");n.wrapper.bind("upload",jQuery.proxy(this._onUploadHandler,this));n.wrapper.bind("success",jQuery.proxy(this._onUploadSuccessHandler,this));n.wrapper.bind("complete",jQuery.proxy(this._onUploadCompleteHandler,this));n.wrapper.bind("select",jQuery.proxy(this._onUploadSelectHandler,this));n.wrapper.bind("error",jQuery.proxy(this._onUploadErrorHandler,this));this._$telerikUpload=n;n=null},dispose:function(){this._$telerikUpload.wrapper.unbind();jQuery(".t-upload input[type='file']",this._parentElement).removeData("tUpload")},set_folderPath:function(n){this._folderPath=n},get_folderPath:function(){return this._folderPath},_onUploadHandler:function(n){n.data={folderPath:this._folderPath,resolveFileName:$q.toString(this._resolveName,"false")}},_onUploadSuccessHandler:function(n){this._uploadedFiles=[];n.response&&(n.response.proceed?jQuery.merge(this._uploadedFiles,n.response.fileNames):alert(n.response.msg))},_onUploadCompleteHandler:function(){var n,t;this._uploadedFiles.length>0&&(n=[],jQuery.each(this._uploadedFiles,function(t,i){n.push(i)}),t=new Quantumart.QP8.BackendUploaderEventArgs(n),this.notify(EVENT_TYPE_LIBRARY_FILE_UPLOADED,t),this._uploadedFiles=[])},_onUploadSelectHandler:function(n){var t=!1,r,i;return(jQuery.each(n.files,function(){this.size&&this.size>=MAX_UPLOAD_SIZE_BYTES&&(t=!0,alert(String.format(HTML_UPLOAD_MAX_SIZE_MESSAGE,this.name,Math.ceil(MAX_UPLOAD_SIZE_BYTES/1048576*100)/100)))}),t)?(n.preventDefault(),!1):(this._extensions.length>0&&(r=jQuery.map(this._extensions.split(";"),function(n){return n.toLowerCase()}),jQuery.each(n.files,function(){Array.indexOf(r,this.extension.toLowerCase())==-1&&(t=!0,alert(String.format(UPLOAD_EXTENSION_MESSAGE,this.name,this.extension)))})),t)?(n.preventDefault(),!1):(i=this,this._resolveName||jQuery.each(n.files,function(){i._checkFileExistence(i._folderPath,this.name)&&(confirm(String.format(UPLOAD_OVERWRITE_MESSAGE,this.name))||(t=!0))}),t?(n.preventDefault(),!1):void 0)},_onUploadErrorHandler:function(n){return alert(HTML_UPLOAD_ERROR_MESSAGE),n.preventDefault(),!1},_checkFileExistence:function(n,t){var i=APPLICATION_ROOT_URL+"Library/FileExists/",r=$q.getJsonSync(i,{path:n,name:t});return r.result}};Quantumart.QP8.BackendHtmlUploader.registerClass("Quantumart.QP8.BackendHtmlUploader",Quantumart.QP8.Observable,Quantumart.QP8.IBackendUploader);