Quantumart.QP8.BackendTraceWindow=function(){Quantumart.QP8.BackendTraceWindow.initializeBase(this);var n=this;this._onTraceToolbarButtonClickedHandler=function(t,i,r){var u=r.get_value();u==n.START_BUTTON_CODE?(Sys.Debug.startTrace(),n._refreshToolbarItems()):u==n.STOP_BUTTON_CODE?(Sys.Debug.stopTrace(),n._refreshToolbarItems()):u==n.CLEAR_BUTTON_CODE&&Sys.Debug.clearTrace()};this._onTraceWindowResizeHandler=function(){n._fixConsoleAreaHeight()};this._onTraceWindowOpenHandler=function(){n._fixConsoleAreaHeight()}};Quantumart.QP8.BackendTraceWindow.prototype={_toolbarComponent:null,_windowComponent:null,_onToolbarButtonClicked:null,_onTraceWindowResizeHandler:null,_onTraceWindowOpenHandler:null,START_BUTTON_CODE:"start",STOP_BUTTON_CODE:"stop",CLEAR_BUTTON_CODE:"clear",initialize:function(){this._windowComponent=this._createWindow()},_createWindow:function(){var i=new $.telerik.stringBuilder,r,t,u,n;return i.cat('<div id="traceToolbarWrapper" class="toolbarWrapper">\n').cat('\t<div id="traceActionToolbarWrapper" class="actionToolbarWrapper"><\/div>\n').cat("<\/div>\n").cat('<div id="TraceConsole" class="area"><\/div>\n'),r=$.telerik.window.create({title:$l.TraceWindow.windowTitle,html:i.string(),width:575,height:300,minWidth:200,minHeight:50,modal:!1,actions:["Maximize","Close"],resizable:!0,draggable:!0,effects:{list:[{name:"toggle"},{name:"property",properties:["opacity"]}],openDuration:"fast",closeDuration:"fast"}}).data("tWindow").center(),i=null,t=jQuery(r.element),t.addClass("popupWindow").addClass("traceWindow").css("display","none").bind("open",this._onTraceWindowOpenHandler).bind("resize",this._onTraceWindowResizeHandler),u=t.find("DIV.t-window-content:first"),jQuery.support.borderRadius&&u.css("paddingBottom","5px"),u=null,t=null,n=new Quantumart.QP8.BackendToolbar,n.set_toolbarElementId("traceToolbar"),n.set_toolbarContainerElementId("traceActionToolbarWrapper"),n.initialize(),n.attachObserver(EVENT_TYPE_TOOLBAR_BUTTON_CLICKED,this._onTraceToolbarButtonClickedHandler),this._toolbarComponent=n,this._addToolbarItemsToToolbar(),this._refreshToolbarItems(),r},toggleWindow:function(){var n=jQuery(this._windowComponent.element);n.is(":hidden")?this._openWindow():this._closeWindow();n=null},_openWindow:function(){this._windowComponent.open();this._toolbarComponent.showToolbar();this._fixConsoleAreaHeight()},_closeWindow:function(){this._toolbarComponent.hideToolbar();this._windowComponent.close()},_addToolbarItemsToToolbar:function(){var n=[],r={Type:TOOLBAR_ITEM_TYPE_BUTTON,Value:this.START_BUTTON_CODE,Text:"",Tooltip:$l.TraceWindow.startButtonTooltip,ItemsAffected:1,Icon:"start.gif"},t,i;Array.add(n,r);t={Type:TOOLBAR_ITEM_TYPE_BUTTON,Value:this.STOP_BUTTON_CODE,Text:"",Tooltip:$l.TraceWindow.stopButtonTooltip,ItemsAffected:1,Icon:"stop.gif"};Array.add(n,t);i={Type:TOOLBAR_ITEM_TYPE_BUTTON,Value:this.CLEAR_BUTTON_CODE,Text:"",Tooltip:$l.TraceWindow.clearButtonTooltip,ItemsAffected:1,Icon:"clear.gif"};Array.add(n,i);this._toolbarComponent.addToolbarItemsToToolbar(n)},_refreshToolbarItems:function(){var n=Sys.Debug.isStopped();this._toolbarComponent.setEnableState(this.START_BUTTON_CODE,n);this._toolbarComponent.setEnableState(this.STOP_BUTTON_CODE,!n)},_fixConsoleAreaHeight:function(){var t=jQuery(this._windowComponent.element),n=t.find("DIV.t-window-content:first"),i=jQuery(this._toolbarComponent.get_toolbarElement()),r=n.find("DIV.area:first"),u=n.height()-i.outerHeight();r.height(u);r=null;i=null;n=null;t=null},dispose:function(){if(Quantumart.QP8.BackendTraceWindow.callBaseMethod(this,"dispose"),this._toolbarComponent&&(this._toolbarComponent.dispose(),this._toolbarComponent=null),this._windowComponent){var n=this._windowComponent,t=jQuery(n.element);t.unbind("open",this._onTraceWindowOpenHandler).unbind("resize",this._onTraceWindowResizeHandler);t=null;$c.destroyPopupWindow(n);n=null;this._windowComponent=null}Quantumart.QP8.BackendTraceWindow._instance=null;$q.collectGarbageInIE()}};Quantumart.QP8.BackendTraceWindow._instance=null;Quantumart.QP8.BackendTraceWindow.getInstance=function(){return Quantumart.QP8.BackendTraceWindow._instance==null&&(Quantumart.QP8.BackendTraceWindow._instance=new Quantumart.QP8.BackendTraceWindow,Quantumart.QP8.BackendTraceWindow._instance.initialize()),Quantumart.QP8.BackendTraceWindow._instance};Quantumart.QP8.BackendTraceWindow.destroyInstance=function(){Quantumart.QP8.BackendTraceWindow._instance&&Quantumart.QP8.BackendTraceWindow._instance.dispose()};Quantumart.QP8.BackendTraceWindow.registerClass("Quantumart.QP8.BackendTraceWindow",Quantumart.QP8.Observable);