CodeMirror.defineMode("htmlmixed",function(n,t){function u(n,t){var h=t.htmlState.tagName,s=i.token(n,t.htmlState),u,e,f;if(h=="script"&&/\btag\b/.test(s)&&n.current()==">"){for(u=n.string.slice(Math.max(0,n.pos-100),n.pos).match(/\btype\s*=\s*("[^"]+"|'[^']+'|\S+)[^<]*$/i),u=u?u[1]:"",u&&/[\"\']/.test(u.charAt(0))&&(u=u.slice(1,u.length-1)),e=0;e<r.length;++e)if(f=r[e],typeof f.matches=="string"?u==f.matches:f.matches.test(u)){f.mode&&(t.token=c,t.localMode=f.mode,t.localState=f.mode.startState&&f.mode.startState(i.indent(t.htmlState,"")));break}}else h=="style"&&/\btag\b/.test(s)&&n.current()==">"&&(t.token=l,t.localMode=o,t.localState=o.startState(i.indent(t.htmlState,"")));return s}function h(n,t,i){var r=n.current(),u=r.search(t),f;return u>-1?n.backUp(r.length-u):(f=r.match(/<\/?$/))&&(n.backUp(r.length),n.match(t,!1)||n.match(r[0])),i}function c(n,t){return n.match(/^<\/\s*script\s*>/i,!1)?(t.token=u,t.localState=t.localMode=null,u(n,t)):h(n,/<\/\s*script\s*>/,t.localMode.token(n,t.localState))}function l(n,t){return n.match(/^<\/\s*style\s*>/i,!1)?(t.token=u,t.localState=t.localMode=null,u(n,t)):h(n,/<\/\s*style\s*>/,o.token(n,t.localState))}var i=CodeMirror.getMode(n,{name:"xml",htmlMode:!0}),o=CodeMirror.getMode(n,"css"),r=[],s=t&&t.scriptTypes,f,e;if(r.push({matches:/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^$/i,mode:CodeMirror.getMode(n,"javascript")}),s)for(f=0;f<s.length;++f)e=s[f],r.push({matches:e.matches,mode:e.mode&&CodeMirror.getMode(n,e.mode)});return r.push({matches:/./,mode:CodeMirror.getMode(n,"text/plain")}),{startState:function(){var n=i.startState();return{token:u,localMode:null,localState:null,htmlState:n}},copyState:function(n){if(n.localState)var t=CodeMirror.copyState(n.localMode,n.localState);return{token:n.token,localMode:n.localMode,localState:t,htmlState:CodeMirror.copyState(i,n.htmlState)}},token:function(n,t){return t.token(n,t)},indent:function(n,t){return!n.localMode||/^\s*<\//.test(t)?i.indent(n.htmlState,t):n.localMode.indent?n.localMode.indent(n.localState,t):CodeMirror.Pass},electricChars:"/{}:",innerMode:function(n){return{state:n.localState||n.htmlState,mode:n.localMode||i}}}},"xml","javascript","css");CodeMirror.defineMIME("text/html","htmlmixed");