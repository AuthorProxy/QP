(function(n){var t="vertical_resizer";VerticalResizer=function(n,t){this._onBottomHandleMouseDownHandler=jQuery.proxy(this._onBottomHandleMouseDown,this);this._onDocumentMouseMoveHandler=jQuery.proxy(this._onDocumentMouseMove,this);this._onDocumentMouseUpHandler=jQuery.proxy(this._onDocumentMouseUp,this);this.initialize(n,t)};VerticalResizer.prototype={_panelElement:null,_bottomHandleElement:null,_heightOffset:0,_lastMousePositionTop:0,_options:null,_onBottomHandleMouseDownHandler:null,_onDocumentMouseMoveHandler:null,_onDocumentMouseUpHandler:null,get_bottomHandleElement:function(){return this._bottomHandleElement},initialize:function(t,i){var f,r,u;this._options=n.extend({},n.fn.verticalResizer.defaults,i);f=this._options.bottomHandleCssClassName;r=n(t);r.wrap("<div><\/div>").parent().append(n('<div class="'+f+'" style="display:none"><\/div>'));u=n("."+f,r.parent());this._options.allowFixBottomHandleWidth&&u.css("margin-right",u.outerWidth()-r.outerWidth()+"px");u.bind("mousedown",this._onBottomHandleMouseDownHandler);this._panelElement=r.get(0);this._bottomHandleElement=u.get(0);r=null;u=null},_startDrag:function(t){this._lastMousePositionTop=t;this._heightOffset=n(this._panelElement).height()-this._lastMousePositionTop;var i=n(document);return this._disableTextSelect(i),i.mousemove(this._onDocumentMouseMoveHandler).mouseup(this._onDocumentMouseUpHandler),i=null,jQuery(this._bottomHandleElement).addClass("active"),!1},_getNewPanelHeight:function(n){var t=this._heightOffset+n;return this._lastMousePositionTop>=n&&(t-=5),this._lastMousePositionTop=n,t},_getMousePosition:function(n){var t=document.documentElement;return{x:n.clientX+t.scrollLeft,y:n.clientY+t.scrollTop}},_endDrag:function(){var t=n(document);this._enableTextSelect(t);t.unbind("mousemove",this._onDocumentMouseMoveHandler).unbind("mouseup",this._onDocumentMouseUpHandler);t=null;jQuery(this._bottomHandleElement).removeClass("active");this._heightOffset=null;this._lastMousePositionTop=0},_cancelDefaultFunction:function(){return!1},_disableTextSelect:function(t){n.browser.msie?t.bind("selectstart",this._cancelDefaultFunction):t.bind("mousedown",this._cancelDefaultFunction)},_enableTextSelect:function(t){n.browser.msie?t.unbind("selectstart",this._cancelDefaultFunction):t.unbind("mousedown",this._cancelDefaultFunction)},showPanelWrapper:function(n){var t=jQuery(this._panelElement).parent();t.is(":hidden")?t.show(0):t.css("display","block");$q.callFunction(n);t=null},hidePanelWrapper:function(n){var t=jQuery(this._panelElement).parent();t.is(":visible")?t.hide(0):t.css("display","none");$q.callFunction(n);t=null},showBottomHandle:function(t){var i=n(this._bottomHandleElement);i.is(":hidden")?i.slideDown(30,t):(i.css("display","block"),$q.callFunction(t));i=null},hideBottomHandle:function(t){var i=n(this._bottomHandleElement);i.is(":visible")?i.slideUp(30,t):(i.css("display","none"),$q.callFunction(t));i=null},_onBottomHandleMouseDown:function(n){var t=this._getMousePosition(n).y;this._startDrag(t)},_onDocumentMouseMove:function(n){var i=jQuery(this._panelElement),f=this._getMousePosition(n).y,t=this._getNewPanelHeight(f),r=this._options.minPanelHeight,u=this._options.maxPanelHeight;return t<r?t=r:t>u&&(t=u),i.height(t).trigger("resize"),i=null,!1},_onDocumentMouseUp:function(){this._endDrag()},dispose:function(){var t=n(document);this._enableTextSelect(t);t.unbind("mousemove",this._onDocumentMouseMoveHandler).unbind("mouseup",this._onDocumentMouseUpHandler);t=null;n(this._bottomHandleElement).unbind("mousedown",this._onBottomHandleMouseDownHandler).hide(0).empty().remove();n(this._panelElement).unwrap();this._panelElement=null;this._bottomHandleElement=null;this._options=null;this._onBottomHandleMouseDownHandler=null;this._onDocumentMouseMoveHandler=null;this._onDocumentMouseUpHandler=null}};n.fn.verticalResizer=function(i){return this.each(function(){var r=n(this),u;r.data(t)||(u=new VerticalResizer(this,i),r.data(t,u))})};n.fn.noVerticalResizer=function(){return this.each(function(){var r=n(this),i=r.data(t);i&&(i.dispose(),i=null,r.removeData(t))})};n.fn.verticalResizer.defaults={bottomHandleCssClassName:"bottomHandle",minPanelHeight:100,maxPanelHeight:400,allowFixBottomHandleWidth:!1}})(jQuery);