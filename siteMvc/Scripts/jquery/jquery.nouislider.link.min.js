/**@preserve
$.Link (part of noUiSlider) - WTFPL */
(function(n){"use strict";function r(n,t,i){if((n[t]||n[i])&&n[t]===n[i])throw new Error("(Link) '"+t+"' can't match '"+i+"'.'");}function f(t){return t instanceof n||n.zepto&&n.zepto.isZ(t)}function i(t){if(t===undefined&&(t={}),typeof t!="object")throw new Error("(Format) 'format' option must be an object.");var i={};n(e).each(function(n,r){if(t[r]===undefined)i[r]=u[n];else if(typeof t[r]==typeof u[n]){if(r==="decimals"&&(t[r]<0||t[r]>7))throw new Error("(Format) 'format.decimals' option must be between 0 and 7.");i[r]=t[r]}else throw new Error("(Format) 'format."+r+"' must be a "+typeof u[n]+".");});r(i,"mark","thousand");r(i,"prefix","negative");r(i,"prefix","negativeBefore");this.settings=i}function t(i,r){return typeof i!="object"&&n.error("(Link) Initialize with an object."),new t.prototype.init(i.target||function(){},i.method,i.format||{},r)}var e=["decimals","mark","thousand","prefix","postfix","encoder","decoder","negative","negativeBefore","to","from"],u=[2,".","","","",function(n){return n},function(n){return n},"-","",function(n){return n},function(n){return n}];i.prototype.v=function(n){return this.settings[n]};i.prototype.to=function(n){function i(n){return n.split("").reverse().join("")}n=this.v("encoder")(n);var r=this.v("decimals"),u="",f="",t="",e="";return parseFloat(n.toFixed(r))===0&&(n="0"),n<0&&(u=this.v("negative"),f=this.v("negativeBefore")),n=Math.abs(n).toFixed(r).toString(),n=n.split("."),this.v("thousand")?(t=i(n[0]).match(/.{1,3}/g),t=i(t.join(i(this.v("thousand"))))):t=n[0],this.v("mark")&&n.length>1&&(e=this.v("mark")+n[1]),this.v("to")(f+this.v("prefix")+u+t+e+this.v("postfix"))};i.prototype.from=function(n){function i(n){return n.replace(/[\-\/\\\^$*+?.()|\[\]{}]/g,"\\$&")}var t;return n===null||n===undefined?!1:(n=this.v("from")(n),n=n.toString(),t=n.replace(new RegExp("^"+i(this.v("negativeBefore"))),""),n!==t?(n=t,t="-"):t="",n=n.replace(new RegExp("^"+i(this.v("prefix"))),""),this.v("negative")&&(t="",n=n.replace(new RegExp("^"+i(this.v("negative"))),"-")),n=n.replace(new RegExp(i(this.v("postfix"))+"$"),"").replace(new RegExp(i(this.v("thousand")),"g"),"").replace(this.v("mark"),"."),n=this.v("decoder")(parseFloat(t+n)),isNaN(n))?!1:n};t.prototype.setTooltip=function(t,i){this.method=i||"html";this.el=n(t.replace("-tooltip-","")||"<div/>")[0]};t.prototype.setHidden=function(n){this.method="val";this.el=document.createElement("input");this.el.name=n;this.el.type="hidden"};t.prototype.setField=function(t){function r(n,t,i){return[i?n:t,i?t:n]}var i=this;this.method="val";this.target=t.on("change",function(t){i.obj.val(r(null,n(t.target).val(),i.N),{link:i,set:!0})})};t.prototype.init=function(n,t,i,r){if(this.formatting=i,this.update=!r,typeof n=="string"&&n.indexOf("-tooltip-")===0){this.setTooltip(n,t);return}if(typeof n=="string"&&n.indexOf("-")!==0){this.setHidden(n);return}if(typeof n=="function"){this.target=!1;this.method=n;return}if(f(n)){if(!t){if(n.is("input, select, textarea")){this.setField(n);return}t="html"}if(typeof t=="function"||typeof t=="string"&&n[t]){this.method=t;this.target=n;return}}throw new RangeError("(Link) Invalid Link.");};t.prototype.write=function(n,t,i,r){this.update&&r===!1||(this.actual=n,n=this.format(n),this.saved=n,typeof this.method=="function"?this.method.call(this.target[0]||i[0],n,t,i):this.target[this.method](n,t,i))};t.prototype.setFormatting=function(t){this.formatting=new i(n.extend({},t,this.formatting instanceof i?this.formatting.settings:this.formatting))};t.prototype.setObject=function(n){this.obj=n};t.prototype.setIndex=function(n){this.N=n};t.prototype.format=function(n){return this.formatting.to(n)};t.prototype.getValue=function(n){return this.formatting.from(n)};t.prototype.init.prototype=t.prototype;n.Link=t})(window.jQuery||window.Zepto);