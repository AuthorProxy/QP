// Code generated by a template
using System;
using System.Linq;
using System.Collections;
using System.Collections.Generic;

namespace EntityFramework6.Test.DataContext
{
	public partial class AfiellFieldsItem: IQPArticle
	{
		#region Static members
		protected static readonly Dictionary<string, Func<AfiellFieldsItem, IQPFormService, string>> _valueExtractors = new Dictionary<string, Func<AfiellFieldsItem,  IQPFormService, string>>
		{
			{ "String", new Func<AfiellFieldsItem, IQPFormService, string>((self, ctx) => self.String != null ? ctx.ReplacePlaceholders(self.String) : null) },
			{ "Integer", new Func<AfiellFieldsItem, IQPFormService, string>((self, ctx) => self.Integer != null ? self.Integer.ToString() : null) },
			{ "Decimal", new Func<AfiellFieldsItem, IQPFormService, string>((self, ctx) => self.Decimal != null ? self.Decimal.ToString() : null) },
			{ "Boolean", new Func<AfiellFieldsItem, IQPFormService, string>((self, ctx) => self.Boolean != null ? self.Boolean.Value ? "1" : "0" : null) },
			{ "Date", new Func<AfiellFieldsItem, IQPFormService, string>((self, ctx) => self.Date != null ? self.Date.ToString() : null) },
			{ "Time", new Func<AfiellFieldsItem, IQPFormService, string>((self, ctx) => self.Time != null ? self.Time.ToString() : null) },
			{ "DateTime", new Func<AfiellFieldsItem, IQPFormService, string>((self, ctx) => self.DateTime != null ? self.DateTime.ToString() : null) },
			{ "File", new Func<AfiellFieldsItem, IQPFormService, string>((self, ctx) => self.File != null ? self.File : null) },
			{ "Image", new Func<AfiellFieldsItem, IQPFormService, string>((self, ctx) => self.Image != null ? self.Image : null) },
			{ "TextBox", new Func<AfiellFieldsItem, IQPFormService, string>((self, ctx) => self.TextBox != null ? self.TextBox : null) },
			{ "VisualEdit", new Func<AfiellFieldsItem, IQPFormService, string>((self, ctx) => self.VisualEdit != null ? ctx.ReplacePlaceholders(self.VisualEdit) : null) },
			{ "DynamicImage", new Func<AfiellFieldsItem, IQPFormService, string>((self, ctx) => self.DynamicImage != null ? self.DynamicImage : null) },
			{ "Enum", new Func<AfiellFieldsItem, IQPFormService, string>((self, ctx) => self.Enum != null ? ctx.ReplacePlaceholders(self.Enum) : null) },
		};

		#endregion
		#region Genarated properties
		public string FileUrl { get; set; }
		public string ImageUrl { get; set; }
		public string DynamicImageUrl { get; set; }
		public string FileUploadPath { get; set; }
		public string ImageUploadPath { get; set; }
		public Int32 IntegerExact { get { return this.Integer == null ? default(Int32) : this.Integer.Value; } }
		public Decimal DecimalExact { get { return this.Decimal == null ? default(Decimal) : this.Decimal.Value; } }
		public Boolean BooleanExact { get { return this.Boolean == null ? default(Boolean) : this.Boolean.Value; } }
		#endregion
		#region Methods
		void IQPArticle.OnMaterialized(IQPLibraryService context)
		{
			this.String = context.ReplacePlaceholders(this.String);
			this.VisualEdit = context.ReplacePlaceholders(this.VisualEdit);
			this.Enum = context.ReplacePlaceholders(this.Enum);
			this.FileUrl = context.GetUrl(this.File, "AfiellFieldsItem", "File");
			this.ImageUrl = context.GetUrl(this.Image, "AfiellFieldsItem", "Image");
			this.DynamicImageUrl = context.GetUrl(this.DynamicImage, "AfiellFieldsItem", "DynamicImage");
			this.FileUploadPath = context.GetUploadPath(this.File, "AfiellFieldsItem", "File");
			this.ImageUploadPath = context.GetUploadPath(this.Image, "AfiellFieldsItem", "Image");
		}

		// для Poco перенести из класса куда-нибудь, так как нарушается концепция доступа к БД
		Hashtable IQPArticle.Pack(IQPFormService context, params string[] propertyNames)
        {
            Hashtable table;

            if (propertyNames == null || propertyNames.Length == 0)
            {
				// todo: filter null values
                table = new Hashtable(_valueExtractors.ToDictionary(x => context.GetFormNameByNetNames("AfiellFieldsItem", x.Key), y => y.Value(this, context)));
            }
            else
            {
                table = new Hashtable();
                foreach (var prop in propertyNames.Join(_valueExtractors.Keys, x => x, x => x, (x, y) => x))
                {
					string value = _valueExtractors[prop](this, context);
					table.Add(prop, value);
                }
            }

            return table;
        }
		#endregion
	}
}
